


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- 
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) 
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyFormex file formats &mdash; pyFormex 0.9.0~a1 documentation</title>

    
    <link rel="stylesheet" href="_static/pyformex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.0~a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyFormex 0.9.0~a1 documentation" href="index.html" />
    <link rel="next" title="BuMPix Live GNU/Linux system" href="bumpix.html" />
    <link rel="prev" title="pyFormex FAQ ‘n TRICKS" href="faq.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head>
  <body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="http://www.nongnu.org/pyformex/_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="http://www.nongnu.org/pyformex/_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="bumpix.html" title="BuMPix Live GNU/Linux system"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="faq.html" title="pyFormex FAQ ‘n TRICKS"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyFormex 0.9.0~a1 documentation</a> &gt;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div align="center">

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick"/>
<input type="hidden" name="hosted_button_id" value="P7J4AM4QULB4Q"/>
<input type="image" src="https://www.paypal.com/en_US/BE/i/btn/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
<img alt="" border="0" src="https://www.paypal.com/nl_NL/i/scr/pixel.gif" width="1" height="1"/>
</form>

</div>
   
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyFormex file formats</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#pyformex-project-file-format">pyFormex Project File Format</a></li>
<li><a class="reference internal" href="#pyformex-geometry-file-format-1-6">pyFormex Geometry File Format 1.6</a><ul>
<li><a class="reference internal" href="#general-principles">General principles</a></li>
<li><a class="reference internal" href="#detailed-layout">Detailed layout</a><ul>
<li><a class="reference internal" href="#object-type-specific-fields">Object type specific fields</a></li>
<li><a class="reference internal" href="#optional-fields">Optional fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="faq.html"
                        title="previous chapter">pyFormex FAQ &#8216;n TRICKS</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="bumpix.html"
                        title="next chapter">BuMPix Live GNU/Linux system</a></p>
  
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

<div align="center">
  <p>
  <a href="http://www.fsf.org/register_form?referrer=8491"><img src="http://www.nongnu.org/pyformex/_static/fsf-member8491.png" alt="[FSF Associate Member]" width="89" height="31"  /></a>
  </p>
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img
      src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
  </p>
</div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pyformex-file-formats">
<span id="cha-fileformat"></span><h1>pyFormex file formats<a class="headerlink" href="#pyformex-file-formats" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">March 09, 2013</td>
</tr>
<tr class="field-even field"><th class="field-name">Version:</th><td class="field-body">0.9.0</td>
</tr>
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Benedict Verhegghe &lt;<a class="reference external" href="mailto:benedict&#46;verhegghe&#37;&#52;&#48;ugent&#46;be">benedict<span>&#46;</span>verhegghe<span>&#64;</span>ugent<span>&#46;</span>be</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="topic">
<p class="topic-title first">Abstract</p>
<p>This document describes the native file formats used by pyFormex.
The are currently two file formats: the pyFormex Project File (.pyf)
and the pyFormex Geometry File (.pgf/.formex).</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>pyFormex uses two native file formats to save data on a persistent medium:
the pyFormex Project File (.pyf) and the pyFormex Geometry File (.pgf).</p>
<p>A Project File can store any pyFormex data and is the prefered way
to store your data for later reuse within pyFormex. The data in the resulting
file can normally not be used by humans and can only be easily restored
by pyFormex itself.</p>
<p>The pyFormex Geometry File on the other hand can be used to exchange
data between pyFormex projects or with other software. Because of its
plain text format, the data can be read and evend edited by humans.
You may also wish to save data in this format to make them accessible
the need for pyFormex, or to bridge incompatible changes in pyFormex.</p>
<p>Because the geometrical data in pyFormex can be quite voluminous, the
format has been chosen so as to allow efficient read and write operations
from inside pyFormex. If you want a nicer layout and efficiency is not your
concern, you can used the <tt class="xref py py-meth docutils literal"><span class="pre">fprint()</span></tt> method of the geometry object.</p>
</div>
<div class="section" id="pyformex-project-file-format">
<span id="sec-project-file-format"></span><h2>pyFormex Project File Format<a class="headerlink" href="#pyformex-project-file-format" title="Permalink to this headline">¶</a></h2>
<p>A pyFormex project file is just a pickled Python dictionary stored on file,
possibly with compression. Any pyFormex objects can be exported and stored on
the project file. The resulting file is normally not readable for humans and
because all the class definitions of the exported data have to be present,
the file can only be read back by pyFormex itself.</p>
<p>The format of the project file is therefore currently not further documented.
See <a class="reference internal" href="projects.html"><em>Using Projects</em></a> for the use of project files from within pyFormex.</p>
</div>
<div class="section" id="pyformex-geometry-file-format-1-6">
<span id="sec-geometry-file-format"></span><h2>pyFormex Geometry File Format 1.6<a class="headerlink" href="#pyformex-geometry-file-format-1-6" title="Permalink to this headline">¶</a></h2>
<p>This describes the pyFormex Geometry File Format (PGF) version 1.6 as
drafted on 2013-03-10 and being used in pyFormex 0.9.0.
The version numbering is such that implementations of a later
version are able to read an older version with the same major numbering.
Thus, the 1.6 version can still read version 1.5 files.</p>
<p>The prefered filename extension for pyFormex geometry files is &#8216;.pgf&#8217;,
though this is not a requirement.</p>
<div class="section" id="general-principles">
<h3>General principles<a class="headerlink" href="#general-principles" title="Permalink to this headline">¶</a></h3>
<p>The PGF format consists of a sequence of records of two types: comment
lines and data blocks. A record always ends with a newline character,
but not all newline characters are record separators: data blocks may
include multiple newlines as part of the data.</p>
<p>Comment records are ascii and start with a &#8216;#&#8217; character. Comment records
are mostly used to announce the type and amount of data in the following
data block(s). This is done by comment line containing a sequence of
&#8216;key=value&#8217; statements, separated by semicolons (&#8216;;&#8217;).</p>
<p>Data blocks can be either ascii or binary, and are always announced by
specially crafted comment lines preceding them. Note that even binary
data blocks get a newline character at the end, to mark the end of the
record.</p>
</div>
<div class="section" id="detailed-layout">
<h3>Detailed layout<a class="headerlink" href="#detailed-layout" title="Permalink to this headline">¶</a></h3>
<p>The pyFormex Geometry File starts with a header comment line identify
the file type and version, and possibly specifying some global variables.
For the version 1.6 format the first line may look like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># pyFormex Geometry File (http://pyformex.org) version=&#39;1.6&#39;; sep=&#39; &#39;</span>
</pre></div>
</div>
<p>The version number is used to read back legacy formats in newer versions
of pyFormex. The <cite>sep = &#8216; &#8216;</cite> defines the default data separator for
data blocks that do not specify it (see below).</p>
<p>The remainder of the file is a sequence of comment lines announcing
data blocks, followed by those data blocks. The announcement line
provides information about the number, type and size of data blocks
that follow. This makes it possible to write and read the data using
high speed functions (like <cite>numpy.tofile</cite> and <cite>numpy.fromfile</cite>) and without
having to test any contents of the data.
The data block information in the announcement line is provided by a number
of &#8216;key=value&#8217; strings separated with a semicolon and optional whitespace.</p>
<div class="section" id="object-type-specific-fields">
<h4>Object type specific fields<a class="headerlink" href="#object-type-specific-fields" title="Permalink to this headline">¶</a></h4>
<p>For each object type that can be stored, there are some required fields
and data blocks. In the examples below, <cite>&lt;int&gt;</cite> stands for an integer number,
<cite>&lt;str&gt;</cite> for a string, and <cite>&lt;bool&gt;</cite> for either <cite>True</cite> or <cite>False</cite>.</p>
<ul>
<li><p class="first">Formex: the announcement provides at least:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># objtype=&#39;Formex&#39;; nelems=&lt;int&gt;; nplex=&lt;int&gt;</span>
</pre></div>
</div>
<p>The data block following this line should contain exactly <cite>nelems*nplex*3</cite>
floating point values: the 3 coordinates of the <cite>nplex</cite> points of the
<cite>nelems</cite> elements of the Formex.</p>
</li>
<li><p class="first">Mesh: the announcement contains at least:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># objtype=&#39;Mesh&#39;; ncoords=&lt;int&gt;; nelems=&lt;int&gt;; nplex=&lt;int&gt;</span>
</pre></div>
</div>
<p>In this case two data blocks will follow: first <cite>ncoords*3</cite> float values
with the coordinates of the nodes; then a block with <cite>nelems*nplex</cite>
integer values: the connectivity table of the mesh.</p>
</li>
<li><p class="first">Curve:</p>
</li>
</ul>
</div>
<div class="section" id="optional-fields">
<h4>Optional fields<a class="headerlink" href="#optional-fields" title="Permalink to this headline">¶</a></h4>
<p>The announcement line may contain other fields, usually to define extra
attributes for the object:</p>
<ul class="simple">
<li><cite>props=&lt;bool&gt;</cite> : If the value is True, another data block with <cite>nelems</cite>
integer values follows. These are the property numbers of the object.</li>
<li><cite>eltype=&lt;str&gt;</cite> : Can also have the special value None. If specified and
not None, it will be used to set the element type of the object.</li>
<li><cite>name=&lt;str&gt;</cite> : Name of the object. If specified, pyFormex will use this
value as a key when returning the restored object.</li>
<li><cite>sep=&lt;str&gt;</cite> : This field defines how the data are stored. If it is not
defined, the value from the file header is used.<ul>
<li>An empty string means that the data blocks are written in binary.
Floating point values are stored as little-endian 4byte floats, while
integer values are stored as 4 byte integers.</li>
<li>Any other string makes the data being written in ascii mode, with the
specified string used as a separator between any two values. When
reading a PGF file, extra whitespace and newlines appearing around the
separator are silently ignored.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>The following pyFormex script creates a PGF file containing two objects,
a Formex with one square, and a Mesh with two triangles:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s">&#39;4:0123&#39;</span><span class="p">)</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s">&#39;3:112.34&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setProp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toMesh</span><span class="p">()</span>
<span class="n">writeGeomFile</span><span class="p">(</span><span class="s">&#39;test.pgf&#39;</span><span class="p">,[</span><span class="n">F</span><span class="p">,</span><span class="n">M</span><span class="p">],</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39;, &#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The Mesh has property numbers defined on it, the Formex doesn&#8217;t.
The data are written in ascii mode with &#8216;, &#8216; as separator.
Here is the resulting contents of the file &#8216;test.pgf&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># pyFormex Geometry File (http://pyformex.org) version=&#39;1.6&#39;; sep=&#39;, &#39;</span>
<span class="c"># objtype=&#39;Formex&#39;; nelems=1; nplex=4; props=False; eltype=None; sep=&#39;, &#39;</span>
<span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span>
<span class="c"># objtype=&#39;Mesh&#39;; ncoords=4; nelems=2; nplex=3; props=True; eltype=&#39;tri3&#39;; sep=&#39;, &#39;</span>
<span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span>
<span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span>
<span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
</pre></div>
</div>
<p>This file contains two objects: a Formex and a Mesh. The Formex has 1 element
of plexitude 4 and no property numbers. Following its announcement is a single
data block with 1x4x3 = 12 coordinate values.
The Mesh contains 2 elements of plexitude 3, has element type &#8216;tri3&#8217; and
contains property numbers. Following the announcement are three data blocks:
first the 4*3 nodal coordinates, then the 2*3 = 6 entries in the connectivity
table, and finally 2 property numbers.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="bumpix.html" title="BuMPix Live GNU/Linux system"
             >next</a> |</li>
        <li class="right" >
          <a href="faq.html" title="pyFormex FAQ ‘n TRICKS"
             >previous</a> |</li>
        <li><a href="index.html">pyFormex 0.9.0~a1 documentation</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2012, Benedict Verhegghe.
    </span>
      Last updated on Mar 09, 2013.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </span>
    </div>
  </body>
</html>