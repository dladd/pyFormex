


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- 
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) 
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Assigning properties to geometry &mdash; pyFormex v0.8.6 documentation</title>

    <link rel="stylesheet" href="_static/pyformex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyFormex v0.8.6 documentation" href="index.html" />
    <link rel="up" title="pyFormex user guide" href="user-guide.html" />
    <link rel="next" title="Using Widgets" href="widgets.html" />
    <link rel="prev" title="Using Projects" href="projects.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head>
  <body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="http://www.nongnu.org/pyformex/_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="http://www.nongnu.org/pyformex/_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="widgets.html" title="Using Widgets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="projects.html" title="Using Projects"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyFormex v0.8.6 documentation</a> &gt;</li>
          <li><a href="user-guide.html" accesskey="U">pyFormex user guide</a> &gt;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div align="center">

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick"/>
<input type="hidden" name="hosted_button_id" value="P7J4AM4QULB4Q"/>
<input type="image" src="https://www.paypal.com/en_US/BE/i/btn/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
<img alt="" border="0" src="https://www.paypal.com/nl_NL/i/scr/pixel.gif" width="1" height="1"/>
</form>

</div>
   
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Assigning properties to geometry</a><ul>
<li><a class="reference internal" href="#general-properties">General properties</a></li>
<li><a class="reference internal" href="#using-the-set-and-setname-fields">Using the  set and  setname fields</a></li>
<li><a class="reference internal" href="#specialized-property-records">Specialized property records</a></li>
<li><a class="reference internal" href="#node-properties">Node properties</a></li>
<li><a class="reference internal" href="#element-properties">Element properties</a></li>
<li><a class="reference internal" href="#property-data-classes">Property data classes</a><ul>
<li><a class="reference internal" href="#exporting-to-finite-element-programs">Exporting to finite element programs</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="projects.html"
                        title="previous chapter">Using Projects</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="widgets.html"
                        title="next chapter">Using Widgets</a></p>
  
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

<div align="center">
  <p>
  <a href="http://www.fsf.org/register_form?referrer=8491"><img src="http://www.nongnu.org/pyformex/_static/fsf-member8491.png" alt="[FSF Associate Member]" width="89" height="31"  /></a>
  </p>
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img
      src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
  </p>
</div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="assigning-properties-to-geometry">
<span id="cha-properties"></span><h1>Assigning properties to geometry<a class="headerlink" href="#assigning-properties-to-geometry" title="Permalink to this headline">¶</a></h1>
<p><em>As of version 0.7.1, the way to define properties for elements of the geometry
has changed thoroughly. As a result, the property system has become much more
flexibel and powerful, and can be used for Formex data structures as well as for
TriSurfaces and Finite Element models.</em></p>
<p>With properties we mean any data connected with some part of the geometry other
than the coordinates of its points or the structure of points into elements.
Also, values that can be calculated purely from the coordinates of the points
and the structure of the elements are usually not considerer properties.</p>
<p>Properties can e.g. define material characteristics, external loading and
boundary conditions to be used in numerical simulations of the mechanics of a
structure. The properties module includes some specific functions to facilitate
assigning such properties. But the system is general enough to used it for any
properties that you can think of.</p>
<p>Properties are collected in a <tt class="xref py py-class docutils literal"><span class="pre">PropertyDB</span></tt> object. Before you can store
anything in this database, you need to create it. Usually, you will start with
an empty database.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">P</span> <span class="o">=</span> <span class="n">PropertyDB</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="general-properties">
<span id="sec-general-properties"></span><h2>General properties<a class="headerlink" href="#general-properties" title="Permalink to this headline">¶</a></h2>
<p>Now you can start entering property records into the database. A property record
is a lot like a Python dict object, and thus it can contain nearly anything. It
is implemented however as a <tt class="xref py py-class docutils literal"><span class="pre">CascadingDict</span></tt> object, which means that the
key values are strings and can also be used as attributes to address the value.
Thus, if P is a property record, then a field named key can either be addressed
as P[&#8216;key&#8217;] or as P.key. This implementation was choosen for the convenience of
the user, but has no further advantages over a normal dict object. You should
not use any of the methods of Python&#8217;s dict class as key in a property record:
it would override this method for the object.</p>
<p>The property record has four more reserved (forbidden) keys: kind, tag, set,
setname and nr. The kind and nr should never be set nor changed by the user.
kind is used internally to distinguish among different kind of property records
(see <a class="reference internal" href="#sec-node-properties"><em>Node properties</em></a>). It should only be used to extend the
<tt class="xref py py-class docutils literal"><span class="pre">PropertyDB</span></tt> class with new kinds of properties, e.g. in subclasses. nr
will be set automatically to a unique record number. Some application modules
use this number for identification and to create automatic names for property
sets.</p>
<p>The tag, set and setname keys are optional fields and can be set by the user.
They should however only be used for the intended purposes explained hereafter,
because they have a special meaning for the database methods and application
modules.</p>
<p>The tag field can be used to attach an identification string to the property
record. This string can be as complex as the user wants and its interpretation
is completely left to the user. The <tt class="xref py py-class docutils literal"><span class="pre">PropertyDB</span></tt> class just provides an
easy way to select the records by their tag name or by a set of tag names. The
set and setname fields are treated further in <a class="reference internal" href="#sec-set-and-setname"><em>Using the  set and  setname fields</em></a>.</p>
<p>So let&#8217;s create a property record in our database. The Prop() method does just
that. It also returns the property record, so you can directly use it further in
your code.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Stick</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Prop</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;green&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Stick&#39;</span><span class="p">,</span><span class="n">weight</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> \
<span class="go">        comment=&#39;This could be anything: a gum, a frog, a usb-stick,...&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Stick</span>

<span class="go">  color = green</span>
<span class="go">  comment = This could be anything: a gum, a frog, a usb-stick,...</span>
<span class="go">  nr = 0</span>
<span class="go">  name = Stick</span>
<span class="go">  weight = 25</span>
</pre></div>
</div>
<p>Notice the auto-generated <cite>nr</cite> field. Here&#8217;s another example, with a tag:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">author</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Prop</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s">&#39;author&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Alfred E Neuman&#39;</span><span class="p">,</span>\
<span class="go">        address=CascadingDict({&#39;street&#39;:&#39;Krijgslaan&#39;, &#39;city&#39;:&#39;Gent&#39;,&#39;country&#39;:&#39;Belgium&#39;}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">author</span>

<span class="go">  nr = 1</span>
<span class="go">  tag = author</span>
<span class="go">  name = Alfred E Neuman</span>
<span class="go">  address =</span>
<span class="go">    city = Gent</span>
<span class="go">    street = Krijgslaan</span>
<span class="go">    country = Belgium</span>
</pre></div>
</div>
<p>This example shows that record values can be complex structured objects. Notice
how the <tt class="xref py py-class docutils literal"><span class="pre">CascadingDict</span></tt> object is by default printed in a very readible
layout, offsetting each lower level dictionary two more postions to the right.</p>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">CascadingDict</span></tt> has yet another fine characteristic: if an attribute
is not found in the toplevel, all values that are instances of
<tt class="xref py py-class docutils literal"><span class="pre">CascadingDict</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">Dict</span></tt> (but not the normal Python dict) will be
searched for the attribute. If needed, this searching is even repeated in the
values of the next levels, and further on, thus cascading though all levels of
<tt class="xref py py-class docutils literal"><span class="pre">CascadingDict</span></tt> structures until the attribute can eventually be found.
The cascading does not proceed through values in a <tt class="xref py py-class docutils literal"><span class="pre">Dict</span></tt>. An attribute
that is not found in any of the lower level dictionaries, will return a None
value.</p>
<p>If you set an attribute of a <tt class="xref py py-class docutils literal"><span class="pre">CascadingDict</span></tt>, it is always set in the
toplevel. If you want to change lower level attributes, you need to use the full
path to it.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">author</span><span class="o">.</span><span class="n">st</span>
<span class="go">  Krijgslaan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">author</span><span class="o">.</span><span class="n">street</span> <span class="o">=</span> <span class="s">&#39;Voskenslaan&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">author</span><span class="o">.</span><span class="n">street</span>
<span class="go">  Voskenslaan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">author</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">street</span>
<span class="go">  Krijgslaan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">author</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">street</span> <span class="o">=</span> <span class="s">&#39;Wiemersdreef&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">author</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">street</span>
<span class="go">  Wiemersdreef</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">author</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Prop</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s">&#39;author&#39;</span><span class="p">,</span><span class="n">alias</span><span class="o">=</span><span class="s">&#39;John Doe&#39;</span><span class="p">,</span>\
<span class="go">        address={&#39;city&#39;: &#39;London&#39;, &#39;street&#39;: &#39;Downing Street 10&#39;, &#39;country&#39;: &#39;United Kingdom&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">author</span>

<span class="go">  nr = 2</span>
<span class="go">  tag = author</span>
<span class="go">  alias = John Doe</span>
<span class="go">  address = {&#39;city&#39;: &#39;London&#39;, &#39;street&#39;: &#39;Downing Street 10&#39;, &#39;country&#39;: &#39;United Kingdom&#39;}</span>
</pre></div>
</div>
<p>In the examples above, we have given a name to the created property records, so
that we could address them in the subsequent print and field assigment
statements. In most cases however, it will be impractical and unnecessary to
give your records a name. They all are recorded in the <tt class="xref py py-class docutils literal"><span class="pre">PropertyDB</span></tt>
database, and will exist as long as the database variable lives. There should be
a way though to request selected data from that database. The <tt class="xref py py-meth docutils literal"><span class="pre">getProp()</span></tt>
method returns a list of records satisfying some conditions. The examples below
show how it can be used.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">P</span><span class="o">.</span><span class="n">getProp</span><span class="p">(</span><span class="n">rec</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]):</span>
<span class="go">        print p.name</span>
<span class="go">Stick</span>
<span class="go">John Doe</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">P</span><span class="o">.</span><span class="n">getProp</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;author&#39;</span><span class="p">]):</span>
<span class="go">        print p.name</span>
<span class="go">None</span>
<span class="go">John Doe</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">P</span><span class="o">.</span><span class="n">getProp</span><span class="p">(</span><span class="n">attr</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]):</span>
<span class="go">        print p.nr</span>
<span class="go">0</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">P</span><span class="o">.</span><span class="n">getProp</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;author&#39;</span><span class="p">],</span><span class="n">attr</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]):</span>
<span class="go">        print p.name</span>
<span class="go">John Doe</span>
</pre></div>
</div>
<p>The first call selects records by number: either a single record number or a
list of numbers can be specified. The second method selects records based on the
value of their tag field. Again a single tag value or a list of values can be
specified. Only those records having a &#8216;tag&#8217; filed matching any of the values in
the list will be returned. The third selection method is based on the existence
of some attribute names in the record. Here, always a list of attribute names is
required. Records are returned that posess all the attributes in the list,
independent from the value of those attributes. If needed, the user can add a
further filtering based on the attribute values. Finally, as is shown in the
last example, all methods of record selection can be combined. Each extra
condition will narrow the selection further down.</p>
</div>
<div class="section" id="using-the-set-and-setname-fields">
<span id="sec-set-and-setname"></span><h2>Using the  set and  setname fields<a class="headerlink" href="#using-the-set-and-setname-fields" title="Permalink to this headline">¶</a></h2>
<p>In the examples above, the property records contained general data, not related
to any geometrical object. When working with large geometrical objects (whether
<tt class="xref py py-class docutils literal"><span class="pre">Formex</span></tt> or other type), one often needs to specify properties that only
hold for some of the elements of the object.</p>
<p>The set can be used to specify a list of integer numbers identifying a
collection of elements of the geometrical object for which the current property
is valid. Absence of the set usually means that the property is assigned to all
elements; however, the property module itself does not enforce this behavior: it
is up to the application to implement it.</p>
<p>Any record that has a set field, will also have a setname field, whose value is
a string. If the user did not specify one, a set name will be auto-generated by
the system. The setname field can be used in other records to refer to the same
set of elements without having to specify them again. The following examples
will make this clear.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="o">.</span><span class="n">Prop</span><span class="p">(</span><span class="nb">set</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">setname</span><span class="o">=</span><span class="s">&#39;green_elements&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;green&#39;</span><span class="p">)</span>
<span class="go">    P.Prop(setname=&#39;green_elements&#39;,transparent=True)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Prop</span><span class="p">(</span><span class="nb">set</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="n">thickness</span><span class="o">=</span><span class="mf">3.2</span><span class="p">)</span>
<span class="go">    P.Prop(setname=a.setname,material=&#39;steel&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">P</span><span class="o">.</span><span class="n">getProp</span><span class="p">(</span><span class="n">attr</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;setname&#39;</span><span class="p">]):</span>
<span class="go">        print p</span>

<span class="go">color = green</span>
<span class="go">nr = 3</span>
<span class="go">set = [0 1 3]</span>
<span class="go">setname = green_elements</span>

<span class="go">nr = 4</span>
<span class="go">transparent = True</span>
<span class="go">setname = green_elements</span>

<span class="go">nr = 5</span>
<span class="go">set = [0 2 4 6]</span>
<span class="go">setname = Set_5</span>
<span class="go">thickness = 3.2</span>

<span class="go">nr = 6</span>
<span class="go">material = steel</span>
<span class="go">setname = Set_5</span>
</pre></div>
</div>
<p>In the first case, the user specifies a setname himself. In the second case, the
auto-generated name is used. As a convenience, the user is allowed to write
set=name instead of setname=name when referring to an already defined set.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="o">.</span><span class="n">Prop</span><span class="p">(</span><span class="nb">set</span><span class="o">=</span><span class="s">&#39;green_elements&#39;</span><span class="p">,</span><span class="n">transparent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">    for p in P.getProp(attr=[&#39;setname&#39;]):</span>
<span class="go">        if p.setname == &#39;green_elements&#39;:</span>
<span class="go">            print p.nr,p.transparent</span>

<span class="go">3 None</span>
<span class="go">4 True</span>
<span class="go">7 False</span>
</pre></div>
</div>
<p>Record 3 does not have the transparent attribute, so a value None is printed.</p>
</div>
<div class="section" id="specialized-property-records">
<span id="sec-special-properties"></span><h2>Specialized property records<a class="headerlink" href="#specialized-property-records" title="Permalink to this headline">¶</a></h2>
<p>The property system presented above allows for recording any kind of values. In
many situations however we will want to work with a specialised and limited set
of attributes. The main developers of e.g. often use the program to create
geometrical models of structures of which they want to analyse the mechanical
behavior. These numerical simulations (FEA, CFD) require specific data that
support the introduction of specialised property records. Currently there are
two such property record types: node properties (see
<a class="reference internal" href="#sec-node-properties"><em>Node properties</em></a>), which are attributed to a single point in space,
and element properties (<a class="reference internal" href="#sec-elem-properties"><em>Element properties</em></a>), which are attributed to a
structured collection of points.</p>
<p>Special purpose properties are distincted by their kind field. General property
records have kind=&#8221;, node properties haven kind=&#8217;n&#8217; and  kind=&#8217;e&#8217; is set for
element properties. Users can create their own specialised property records by
using other value for the kind parameter.</p>
</div>
<div class="section" id="node-properties">
<span id="sec-node-properties"></span><h2>Node properties<a class="headerlink" href="#node-properties" title="Permalink to this headline">¶</a></h2>
<p>Node properties are created with the <tt class="xref py py-meth docutils literal"><span class="pre">nodeProp()</span></tt> method, rather than the
general <tt class="xref py py-meth docutils literal"><span class="pre">Prop()</span></tt>. The kind field does not need to be set: it will be done
automatically. When selecting records using the <tt class="xref py py-meth docutils literal"><span class="pre">getProp()</span></tt> method, add a
kind=&#8217;n&#8217; argument to select only node properties.</p>
<p>Node properties will recognize some special field names and check the values for
consistency. Application plugins such as the Abaqus input file generator depend
on these property structure, so the user should not mess with them. Currently,
the following attributes are in use:</p>
<dl class="docutils">
<dt>cload</dt>
<dd>A concentrated load at the node. This is a list of 6 items: three force
components in axis directions and three force moments around the axes: [F_0,
F_1, F_2, M_0, M_1, M_2].</dd>
<dt>bound</dt>
<dd>A boundary condition for the nodal displacement components. This can be defined
in 2 ways:</dd>
</dl>
<ul>
<li><dl class="first docutils">
<dt>as a list of 6 items [ u_0, u_1, u_2, r_0, r_1, r_2 ]. These items have 2</dt>
<dd><p class="first">possible values:</p>
<dl class="last docutils">
<dt>0</dt>
<dd><p class="first last">The degree of freedom is not restrained.</p>
</dd>
<dt>1</dt>
<dd><p class="first last">The degree of freedom is restrained.</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>as a string. This string is a standard boundary type. Abaqus will recognize</dt>
<dd><p class="first last">the following strings:</p>
</dd>
</dl>
</li>
<li><p class="first">PINNED</p>
</li>
<li><p class="first">ENCASTRE</p>
</li>
<li><p class="first">XSYMM</p>
</li>
<li><p class="first">YSYMM</p>
</li>
<li><p class="first">ZSYMM</p>
</li>
<li><p class="first">XASYMM</p>
</li>
<li><p class="first">YASYMM</p>
</li>
<li><p class="first">ZASYMM</p>
</li>
</ul>
<dl class="docutils">
<dt>displacement</dt>
<dd>Prescribed displacements. This is a list of tuples (i,v), where i is a DOF
number (1..6) and v is the prescribed value for that DOF.</dd>
<dt>coords</dt>
<dd>The coordinate system which is used for the definition of cload, bound and displ
fields. It should be a <tt class="xref py py-class docutils literal"><span class="pre">CoordSys</span></tt> object.</dd>
</dl>
<p>Some simple examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">P</span><span class="o">.</span><span class="n">nodeProp</span><span class="p">(</span><span class="n">cload</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">75</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">P</span><span class="o">.</span><span class="n">nodeProp</span><span class="p">(</span><span class="nb">set</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">bound</span><span class="o">=</span><span class="s">&#39;pinned&#39;</span><span class="p">)</span>
<span class="n">P</span><span class="o">.</span><span class="n">nodeProp</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">displ</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)])</span>
</pre></div>
</div>
<p>The first line sets a concentrated load all the nodes, the second line sets a
boundary condition &#8216;pinned&#8217; on nodes 2 and 3. The third line sets a prescribed
displacement on node 5 with value 0.7 along the first direction. The first
positional argument indeed corresponds to the &#8216;set&#8217; attribute.</p>
<p>Often the properties are computed and stored in variables rather than entered
directly.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">P1</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span> <span class="p">]</span>
<span class="n">P2</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.0</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span> <span class="mf">1.0</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
<span class="n">B1</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
<span class="n">CYL</span> <span class="o">=</span> <span class="n">CoordSystem</span><span class="p">(</span><span class="s">&#39;cylindrical&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">P</span><span class="o">.</span><span class="n">nodeProp</span><span class="p">(</span><span class="n">bound</span><span class="o">=</span><span class="n">B1</span><span class="p">,</span><span class="n">csys</span><span class="o">=</span><span class="n">CYL</span><span class="p">)</span>
</pre></div>
</div>
<p>The first two lines define two concentrated loads: <tt class="docutils literal"><span class="pre">P1</span></tt> consists of three
point loads in each of the coordinate directions; P2 contains three force
moments around the axes. The third line specifies a boundary condition where the
first DOF (usually displacement in <img class="math" src="_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/>-direction) is constrained, while
the remaining 5 DOF&#8217;s are free. The next line defines a local coordinate system,
in this case a cylindrical coordinate system with axis pointing from point
<tt class="docutils literal"><span class="pre">[0.,0.,0.]</span></tt> to point <tt class="docutils literal"><span class="pre">[0.,0.,1.]</span></tt>. The last line</p>
<p>To facilitate property selection, a tag can be added.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">nset1</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">nodeProp</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s">&#39;loadcase 1&#39;</span><span class="p">,</span><span class="nb">set</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">cload</span><span class="o">=</span><span class="n">P1</span><span class="p">)</span><span class="o">.</span><span class="n">nr</span>
<span class="n">P</span><span class="o">.</span><span class="n">nodeProp</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s">&#39;loadcase 2&#39;</span><span class="p">,</span><span class="nb">set</span><span class="o">=</span><span class="n">Nset</span><span class="p">(</span><span class="n">nset1</span><span class="p">),</span><span class="n">cload</span><span class="o">=</span><span class="n">P2</span><span class="p">)</span>
</pre></div>
</div>
<p>The last two lines show how you can avoid duplication of sets in mulitple
records. The same set of nodes should receive different concentrated load values
for different load cases. The load case is stored in a tag, but duplicating the
set definition could become wasteful if the sets are large. Instead of
specifying the node numbers of the set directly, we can pass a string setting a
set name. Of course, the application will need to know how to interprete the set
names. Therefore the property module provides a unified way to attach a unique
set name to each set defined in a property record. The name of a node property
record set can be obtained with the function Nset(nr), where nr is the record
number. In the example above, that value is first recorded in nset1 and then
used in the last line to guarantee the use of the same set as in the property
above.</p>
</div>
<div class="section" id="element-properties">
<span id="sec-elem-properties"></span><h2>Element properties<a class="headerlink" href="#element-properties" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">elemProp()</span></tt> method creates element properties, which will have their
<tt class="docutils literal"><span class="pre">kind</span></tt> attribute set to &#8216;e&#8217;. When selecting records using the <tt class="xref py py-meth docutils literal"><span class="pre">getProp()</span></tt>
method, add the kind=&#8217;e&#8217; argument to get element properties.</p>
<p>Like node properties, element property records have a number of specialize
fields. Currently, the following ones are recognized by the Abaqus input file
generator.</p>
<dl class="docutils">
<dt>eltype</dt>
<dd>This is the single most important element property. It sets the element type that
will be used during the analysis. Notice that a Formex object also may have an
<tt class="docutils literal"><span class="pre">eltype</span></tt> attribute; that one however is only used to describe the type of the
geometric elements involved. The element type discussed here however may also
define some other characteristics of the element, like the number and type of
degrees of freedom to be used in the analysis or the integration rules to be
used. What element types are available is dependent on the analysis package to
be used. Currently, does not do any checks on the element type, so the
simulation program&#8217;s own element designation may be used.</dd>
<dt>section</dt>
<dd>The section properties of the element. This should be an <tt class="xref py py-class docutils literal"><span class="pre">ElemSection</span></tt>
instance, grouping material properties (like Young&#8217;s modulus) and geometrical
properties (like plate thickness or beam section).</dd>
<dt>dload</dt>
<dd>A distributed load acting on the element. The value is an <tt class="xref py py-class docutils literal"><span class="pre">ElemLoad</span></tt>
instance. Currently, this can include a label specifying the type of distributed
loading, a value for the loading, and an optional amplitude curve for specifying
the variation of a time dependent loading.</dd>
</dl>
</div>
<div class="section" id="property-data-classes">
<h2>Property data classes<a class="headerlink" href="#property-data-classes" title="Permalink to this headline">¶</a></h2>
<p>The data collected in property records can be very diverse. At times it can
become quite difficult to keep these data consistent and compatible with other
modules for further processing. The property module contains some data classes
to help you in constructing appropriate data records for Finite Element models.
The FeAbq module can currently interprete the following data types.</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">CoordSystem</span></tt> defines a local coordinate system for a node. Its
constructor takes two arguments:</p>
<ul class="simple">
<li>a string defining the type of coordinate system, either &#8216;Rectangular&#8217;,
&#8216;Cylindrical&#8217; or &#8216;Spherical&#8217; (the first character suffices), and</li>
<li>a list of 6 coordinates, specifying two points A and B. With &#8216;R&#8217;, A is on the
new <img class="math" src="_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/>-axis and B is on the new &#8216;<img class="math" src="_images/math/092e364e1d9d19ad5fffb0b46ef4cc7f2da02c1c.png" alt="y"/> axis. With &#8216;C&#8217; and &#8216;S&#8217;, AB
is the axis of the cylindrical/spherical coordinates.</li>
</ul>
<p>Thus, <tt class="docutils literal"><span class="pre">CoordSystem('C',[0.,0.,0.,0.,0.,1.])</span></tt> defines a cylindrical coordinate
system with the global <img class="math" src="_images/math/b13f21416d84e13708696f34dea81026cda583c9.png" alt="z"/> as axis.</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">ElemLoad</span></tt> is a distributed load on an element. Its constructor takes two
arguments:</p>
<ul class="simple">
<li>a label defining the type of loading,</li>
<li>a value for the loading,</li>
<li>optionally, the name of an amplitude curve.</li>
</ul>
<p>E.g., ElemLoad(&#8216;PZ&#8217;,2.5) defines a distributed load of value 2.5 in the
direction of the <img class="math" src="_images/math/b13f21416d84e13708696f34dea81026cda583c9.png" alt="z"/>-axis.</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">ElemSection</span></tt> can be used to set the material and section properties on
the elements. It can hold:</p>
<ul class="simple">
<li>a section,</li>
<li>a material,</li>
<li>an optional orientation,</li>
<li>an optional connector behavior,</li>
<li>a sectiontype (deprecated). The sectiontype should preferably be set togehter
with the other section parameters.</li>
</ul>
<p>An example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">steel</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">    &#39;name&#39;: &#39;steel&#39;,</span>
<span class="go">    &#39;young_modulus&#39;: 207000,</span>
<span class="go">    &#39;poisson_ratio&#39;: 0.3,</span>
<span class="go">    &#39;density&#39;: 0.1,</span>
<span class="go">    }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thin_plate</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">    &#39;name&#39;: &#39;thin_plate&#39;,</span>
<span class="go">    &#39;sectiontype&#39;: &#39;solid&#39;,</span>
<span class="go">    &#39;thickness&#39;: 0.01,</span>
<span class="go">    &#39;material&#39;: &#39;steel&#39;,</span>
<span class="go">    }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="o">.</span><span class="n">elemProp</span><span class="p">(</span><span class="n">eltype</span><span class="o">=</span><span class="s">&#39;CPS3&#39;</span><span class="p">,</span><span class="n">section</span><span class="o">=</span><span class="n">ElemSection</span><span class="p">(</span><span class="n">section</span><span class="o">=</span><span class="n">thin_plate</span><span class="p">,</span><span class="n">material</span><span class="o">=</span><span class="n">steel</span><span class="p">))</span>
</pre></div>
</div>
<p>First, a material is defined. Then a thin plate section is created, referring to
that material. The last line creates a property record that will attribute this
element section and an element type &#8216;CPS3&#8217; to all elements.</p>
<div class="section" id="exporting-to-finite-element-programs">
<h3>Exporting to finite element programs<a class="headerlink" href="#exporting-to-finite-element-programs" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="widgets.html" title="Using Widgets"
             >next</a> |</li>
        <li class="right" >
          <a href="projects.html" title="Using Projects"
             >previous</a> |</li>
        <li><a href="index.html">pyFormex v0.8.6 documentation</a> &gt;</li>
          <li><a href="user-guide.html" >pyFormex user guide</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2011, Benedict Verhegghe.
    </span>
      Last updated on Jan 16, 2012.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    </span>
    </div>
  </body>
</html>
