


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- 
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) 
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyFormex FAQ ‘n TRICKS &mdash; pyFormex v0.8.6 documentation</title>

    <link rel="stylesheet" href="_static/pyformex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyFormex v0.8.6 documentation" href="index.html" />
    <link rel="next" title="pyFormex file formats" href="file_format.html" />
    <link rel="prev" title="61. timer — A timer class." href="ref/timer.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head>
  <body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="http://www.nongnu.org/pyformex/_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="http://www.nongnu.org/pyformex/_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="file_format.html" title="pyFormex file formats"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ref/timer.html" title="61. timer — A timer class."
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyFormex v0.8.6 documentation</a> &gt;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div align="center">

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick"/>
<input type="hidden" name="hosted_button_id" value="P7J4AM4QULB4Q"/>
<input type="image" src="https://www.paypal.com/en_US/BE/i/btn/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
<img alt="" border="0" src="https://www.paypal.com/nl_NL/i/scr/pixel.gif" width="1" height="1"/>
</form>

</div>
   
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyFormex FAQ &#8216;n TRICKS</a><ul>
<li><a class="reference internal" href="#faq">FAQ</a></li>
<li><a class="reference internal" href="#tricks">TRICKS</a></li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="ref/timer.html"
                        title="previous chapter">61. <tt class="docutils literal"><span class="pre">timer</span></tt> &#8212; A timer class.</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="file_format.html"
                        title="next chapter">pyFormex file formats</a></p>
  
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

<div align="center">
  <p>
  <a href="http://www.fsf.org/register_form?referrer=8491"><img src="http://www.nongnu.org/pyformex/_static/fsf-member8491.png" alt="[FSF Associate Member]" width="89" height="31"  /></a>
  </p>
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img
      src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
  </p>
</div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pyformex-faq-n-tricks">
<span id="cha-faq"></span><h1>pyFormex FAQ &#8216;n TRICKS<a class="headerlink" href="#pyformex-faq-n-tricks" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Date:</th><td class="field-body">January 16, 2012</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">0.8.6</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Benedict Verhegghe &lt;<a class="reference external" href="mailto:benedict&#46;verhegghe&#37;&#52;&#48;ugent&#46;be">benedict<span>&#46;</span>verhegghe<span>&#64;</span>ugent<span>&#46;</span>be</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="topic">
<p class="topic-title first">Abstract</p>
<p>This chapter answers some frequently asked questions about
pyFormex and present some nice tips to solve common problems. If
you have some question that you want answered, or want to present a
original solution to some problem, feel free to communicate it to
us (by preference via the pyFormex <a class="reference external" href="http://savannah.nongnu.org/support/?group=pyformex">Support tracker</a>) and we&#8217;ll probably
include it in the next version of this FAQ.</p>
</div>
<div class="section" id="faq">
<span id="sec-faq"></span><h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><strong>How was the pyFormex logo created?</strong></p>
<p>We used the GNU Image Manipulation Program (<a class="reference external" href="http://www.gimp.org">GIMP</a>). It has a wide variety
of scripts to create logos. With newer versions (&gt;= 2.6) use the menu
<em class="menuselection">Fille‣Create‣Logos‣Alien-neon</em>. With older
versions (&lt;=2.4) use <em class="menuselection">Xtra‣Script-Fu‣Logos‣Alien-neon</em>.</p>
<p>In the Alien Neon dialog specify the following data:</p>
<div class="highlight-python"><pre>Text: pyFormex
Font Size: 150
Font: Blippo-Heavy
Glow Color: 0xFF3366
Background Color: 0x000000
Width of Bands: 2
Width of Gaps: 2
Number of Bands: 7
Fade Away: Yes</pre>
</div>
<p>Press <em class="guilabel">OK</em> to create the logo. Then switch off the background
layer and save the image in PNG format.
Export the image with <tt class="docutils literal"><span class="pre">Save</span> <span class="pre">Background</span> <span class="pre">Color</span></tt> option switched off!</p>
</li>
<li><p class="first"><strong>How was the pyFormex favicon created?</strong>
With FTGL, save as icon, handedited .xpm in emacs to set background color
to None (transparent), then converted to .png and .ico with convert.</p>
</li>
<li id="faq-why-python"><p class="first"><strong>Why is pyFormex written in Python?</strong></p>
<p>Because</p>
<ul class="simple">
<li>it is very easy to learn (See the <a class="reference external" href="http://www.python.org">Python</a> website)</li>
<li>it is extremely powerful (More on <a class="reference external" href="http://www.python.org">Python</a> website)</li>
</ul>
<p>Being a scripting language without the need for variable
declaration, it allows for quick program development. On the other
hand, Python provides numerous interfaces with established compiled
libraries, so it can be surprisingly fast.</p>
</li>
<li><p class="first"><strong>Is an interpreted language like Python fast enough with large data models?</strong></p>
<p>See the <a class="reference internal" href="#faq-why-python"><em>question above</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We should add something about NumPy and the pyFormex C-library.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="tricks">
<span id="sec-tricks"></span><h2>TRICKS<a class="headerlink" href="#tricks" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><strong>Use your script path as the current working directory</strong></p>
<p>Start your script with the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">chdir</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
</pre></div>
</div>
<p>When executing a script, pyFormex sets the name of the script
file in a variable <tt class="docutils literal"><span class="pre">__file__</span></tt> passed with the global variables to
the execution environment of the script.</p>
</li>
<li><p class="first"><strong>Import modules from your own script directories</strong></p>
<p>In order for Python to find the modules in non-standard locations,
you should add the directory path of the module to the <tt class="docutils literal"><span class="pre">sys.path</span></tt>
variable.</p>
<p>A common example is a script that wants to import modules from the
same directory where it is located. In that case you can just add
the following two lines to the start of your script:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Automatically load plugin menus on startup</strong></p>
<p>Plugin menus can be loaded automatically on pyFormex startup, by
adding a line to the <tt class="docutils literal"><span class="pre">[gui]</span></tt> section of your configuration file
(<tt class="docutils literal"><span class="pre">~/.pyformexrc</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">gui</span><span class="p">]</span>
<span class="n">plugins</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;surface_menu&#39;</span><span class="p">,</span> <span class="s">&#39;formex_menu&#39;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Automatically execute your own scripts on startup</strong></p>
<p>If you create your own pugin menus for pyFormex, you cannot
autoload them like the regular plugin menus from the distribution,
because they are not in the plugin directory of the
installation. Do not be tempted to put your own files under the
installation directory (even if you can acquire the permissions to
do so), because on removal or reinstall your files might be
deleted! You can however automatically execute your own scripts by
adding their full path names in the <tt class="docutils literal"><span class="pre">autorun</span></tt> variable of your
configuration file</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">autorun</span> <span class="o">=</span> <span class="s">&#39;/home/user/myscripts/startup/&#39;</span>
</pre></div>
</div>
<p>This script will then be run when the pyFormex GUI starts up. You
can even specify a list of scripts, which will be executed in
order. The autorun scripts are executed as any other pyFormex
script, before any scripts specified on the command line, and
before giving the input focus to the user.</p>
</li>
<li><p class="first"><strong>Multiple viewports with unequal size</strong></p>
<p>The multiple viewports are ordered in a grid layout, and you can
specify relative sizes for the different columns and/or rows of
viewports. You can use setColumnStretch and setRowStretch to give
the columns a relative stretch compared toi the other ones.
The following example produces 4 viewports in a 2x2
layout, with the right column(1) having double width of the left
one(0), while the bottom row has a height equal to 1.5 times the
height of the top row</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">layout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">viewports</span><span class="o">.</span><span class="n">setColumnStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">viewports</span><span class="o">.</span><span class="n">setColumnStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">viewports</span><span class="o">.</span><span class="n">setRowStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">viewports</span><span class="o">.</span><span class="n">setRowStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Activate pyFormex debug messages from your script</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pyformex</span>
<span class="n">pyformex</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Get a list of all available image formats</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">gui.image</span>
<span class="k">print</span> <span class="n">image</span><span class="o">.</span><span class="n">imageFormats</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Create a movie from a sequence of recorded images</strong></p>
<p>The multisave option allows you to easily record a series of images
while working with pyFormex. You may want to turn this sequence
into a movie afterwards. This can be done with the <tt class="docutils literal"><span class="pre">mencoder</span></tt>
and/or <tt class="docutils literal"><span class="pre">ffmpeg</span></tt> programs. The internet provides comprehensive
information on how to use these video encoders.</p>
<p>If you are looking for a quick answer, however, here are some of
the commands we have often used to create movies.</p>
<ul>
<li><p class="first">Create MNPG movies from PNG To keep the quality of the PNG images
in your movie, you should not encode them into a compressed
format like MPEG. You can use the MPNG codec instead. Beware
though that uncompressed encodings may lead to huge video
files. Also, the MNPG is (though freely available), not installed
by default on Windows machines.</p>
<p>Suppose you have images in files <tt class="docutils literal"><span class="pre">image-000.png</span></tt>,
<tt class="docutils literal"><span class="pre">image-001.png</span></tt>, ....  First, you should get the size of the
images (they all should have the same size). The command</p>
<div class="highlight-python"><pre>file image*.png</pre>
</div>
<p>will tell you the size. Then create movie with the command</p>
<div class="highlight-python"><pre>mencoder mf://image-*.png -mf w=796:h=516:fps=5:type=png -ovc copy -oac copy -o movie1.avi</pre>
</div>
<p>Fill in the correct width(w) and height(h) of the images, and set
the frame rate(fps). The result will be a movie <tt class="docutils literal"><span class="pre">movie1.avi</span></tt>.</p>
</li>
<li><p class="first">Create a movie from (compressed) JPEG images. Because the
compressed format saves a lot of space, this will be the prefered
format if you have lots of image files. The quality of the
compressed image movie will suffer somewhat, though.</p>
<div class="highlight-python"><pre>ffmpeg -r 5 -b 800 -i image-%03d.jpg movie.mp4</pre>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>Install the</strong> <tt class="xref py py-mod docutils literal"><span class="pre">gl2ps</span></tt> <strong>extension</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This belongs in <a class="reference internal" href="install.html"><em>Installing pyFormex</em></a></p>
</div>
<p>Saving images in EPS format is done through the gl2ps library,
which can be accessed from Python using wrapper functions.
Recent versions of pyFormex come with an installation script
that will also generate the required Python interface module.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The older <tt class="docutils literal"><span class="pre">python-gl2ps-1.1.2.tar.gz</span></tt> available from the
web is no longer supported</p>
</div>
<p>You need to have the OpenGL header files installed in order to do
this (on Debian: <tt class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libgl1-mesa-dev</span></tt>).</p>
</li>
<li><p class="first"><strong>Permission denied error when running calpy simulation</strong></p>
<p>If you have no write permission in your current working directory,
running a calpy simulation will result in an error like this:</p>
<div class="highlight-python"><pre>fil = file(self.tempfilename,'w')
IOError
:
[Errno 13] Permission denied: 'calpy.tmp.part-0'</pre>
</div>
<p>You can fix this by changing your current working directory to a path
where you have write permission (e.g. your home directory).
You can do this using the <em class="menuselection">File-&gt;Change workdir</em> menu option.
The setting will be saved when you leave pyFormex (but other scripts
might change the setting again).</p>
</li>
<li><p class="first"><strong>Reading back old Project (.pyf) files</strong></p>
<p>When the implementation of some pyFormex class changes, or when the
location of a module is changed, an error may result when trying to
read back old Project (.pyf) files. While in principle it is possible
to create the necessary interfaces to read back the old data and transform
them to new ones, our current policy is to not do this by default for
all classes and all changes. That would just require too much resources
for maybe a few or no cases occurring.
We do provide here some guidelines to help you with solving the problems
yourself. And if you are not able to fix it, just file a support request
at our <a class="reference external" href="http://savannah.nongnu.org/support/?group=pyformex">Support tracker</a> and we will try to help you.</p>
<p>If the problem is with a changed implementation of a class, it can usually
be fixed by adding an appropriate __set_state__ method to the class.
Currently we have this for Formex and Mesh classes. Look at the code
in formex.py and mesh.py respectively.</p>
<p>If the problem comes from a relocation of a module (e.g. the mesh module
was moved from plugins to the pyFormex core), you may get an error like
this:</p>
<div class="highlight-python"><pre>AttributeError: 'NoneType' object has no attribute 'Mesh'</pre>
</div>
<p>The reason is that the path recorded in the Project file pointed to the
old location of the mesh module under <tt class="docutils literal"><span class="pre">plugins</span></tt> while the mesh module
is now in the top pyformex directory. This can be fixed in two ways:</p>
<ul>
<li><p class="first">The easy (but discouraged) way is to add a symbolic link in the old
position, linking to the new one. We do not encourage to use this
method, because it sustains the dependency on legacy versions.</p>
</li>
<li><p class="first">The recommended way is to convert your Project file to point to the
new path. To take care of the above relocation of the mesh module,
you could e.g. use the following command to convert your <tt class="docutils literal"><span class="pre">old.pyf</span></tt> to
a <tt class="docutils literal"><span class="pre">new.pyf</span></tt> that can be properly read. It just replaces the old module
path (<tt class="docutils literal"><span class="pre">plugins.mesh</span></tt>) with the current path (<tt class="docutils literal"><span class="pre">mesh</span></tt>):</p>
<div class="highlight-python"><pre>sed 's|plugins.mesh|mesh|'g old.pyf &gt;new.pyf</pre>
</div>
</li>
</ul>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="file_format.html" title="pyFormex file formats"
             >next</a> |</li>
        <li class="right" >
          <a href="ref/timer.html" title="61. timer — A timer class."
             >previous</a> |</li>
        <li><a href="index.html">pyFormex v0.8.6 documentation</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2011, Benedict Verhegghe.
    </span>
      Last updated on Jan 16, 2012.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    </span>
    </div>
  </body>
</html>
