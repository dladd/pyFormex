


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- 
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) 
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyFormex example scripts &mdash; pyFormex v0.8.6 documentation</title>

    <link rel="stylesheet" href="_static/pyformex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyFormex v0.8.6 documentation" href="index.html" />
    <link rel="next" title="pyFormex reference manual" href="refman.html" />
    <link rel="prev" title="Configuring pyFormex" href="config.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head>
  <body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="http://www.nongnu.org/pyformex/_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="http://www.nongnu.org/pyformex/_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="refman.html" title="pyFormex reference manual"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="config.html" title="Configuring pyFormex"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyFormex v0.8.6 documentation</a> &gt;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div align="center">

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick"/>
<input type="hidden" name="hosted_button_id" value="P7J4AM4QULB4Q"/>
<input type="image" src="https://www.paypal.com/en_US/BE/i/btn/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
<img alt="" border="0" src="https://www.paypal.com/nl_NL/i/scr/pixel.gif" width="1" height="1"/>
</form>

</div>
   
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyFormex example scripts</a><ul>
<li><a class="reference internal" href="#wirestent">WireStent</a><ul>
<li><a class="reference internal" href="#creating-the-base-module">Creating the base module</a></li>
<li><a class="reference internal" href="#extending-the-base-module">Extending the base module</a></li>
<li><a class="reference internal" href="#full-nearly-planar-pattern">Full nearly planar pattern</a></li>
<li><a class="reference internal" href="#cylindrical-stent-structure">Cylindrical stent structure</a></li>
<li><a class="reference internal" href="#parametric-stent-geometry">Parametric stent geometry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operating-on-surface-meshes">Operating on surface meshes</a><ul>
<li><a class="reference internal" href="#unroll-stent">Unroll stent</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="config.html"
                        title="previous chapter">Configuring pyFormex</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="refman.html"
                        title="next chapter">pyFormex reference manual</a></p>
  
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

<div align="center">
  <p>
  <a href="http://www.fsf.org/register_form?referrer=8491"><img src="http://www.nongnu.org/pyformex/_static/fsf-member8491.png" alt="[FSF Associate Member]" width="89" height="31"  /></a>
  </p>
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img
      src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
  </p>
</div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pyformex-example-scripts">
<span id="cha-examples"></span><h1>pyFormex example scripts<a class="headerlink" href="#pyformex-example-scripts" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This document still needs some cleanup!</p>
</div>
<p>Sometimes you learn quicker from studying an example than from reading a
tutorial or user guide. To help you we have created this collection of
annotated examples. Beware that the script texts presented in this document
may differ slightly from the corresponding example coming with the pyFormex
distribution.</p>
<div class="section" id="wirestent">
<span id="sec-creating-geometry"></span><h2>WireStent<a class="headerlink" href="#wirestent" title="Permalink to this headline">¶</a></h2>
<p>To get acquainted with the modus operandi of pyFormex,
the <tt class="file docutils literal"><span class="pre">WireStent.py</span></tt> script is studied step by step. The lines are numbered
for easy referencing, but are not part of the script itself.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># $Id: WireStent.py 2146 2012-01-09 08:57:52Z bverheg $   *** pyformex ***</span>
<span class="c">##</span>
<span class="c">##  This file is part of pyFormex 0.8.6  (Mon Jan 16 21:15:46 CET 2012)</span>
<span class="c">##  pyFormex is a tool for generating, manipulating and transforming 3D</span>
<span class="c">##  geometrical models by sequences of mathematical operations.</span>
<span class="c">##  Home page: http://pyformex.org</span>
<span class="c">##  Project page:  http://savannah.nongnu.org/projects/pyformex/</span>
<span class="c">##  Copyright 2004-2011 (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) </span>
<span class="c">##  Distributed under the GNU General Public License version 3 or later.</span>
<span class="c">##</span>
<span class="c">##</span>
<span class="c">##  This program is free software: you can redistribute it and/or modify</span>
<span class="c">##  it under the terms of the GNU General Public License as published by</span>
<span class="c">##  the Free Software Foundation, either version 3 of the License, or</span>
<span class="c">##  (at your option) any later version.</span>
<span class="c">##</span>
<span class="c">##  This program is distributed in the hope that it will be useful,</span>
<span class="c">##  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">##  GNU General Public License for more details.</span>
<span class="c">##</span>
<span class="c">##  You should have received a copy of the GNU General Public License</span>
<span class="c">##  along with this program.  If not, see http://www.gnu.org/licenses/.</span>
<span class="c">##</span>
<span class="sd">&quot;&quot;&quot;Wirestent.py</span>

<span class="sd">A pyFormex script to generate a geometrical model of a wire stent.</span>

<span class="sd">This version is for inclusion in the pyFormex documentation.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">formex</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">DoubleHelixStent</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Constructs a double helix wire stent.</span>

<span class="sd">    A stent is a tubular shape such as used for opening obstructed</span>
<span class="sd">    blood vessels. This stent is made frome sets of wires spiraling</span>
<span class="sd">    in two directions.</span>
<span class="sd">    The geometry is defined by the following parameters:</span>
<span class="sd">      L  : approximate length of the stent</span>
<span class="sd">      De : external diameter of the stent </span>
<span class="sd">      D  : average stent diameter</span>
<span class="sd">      d  : wire diameter</span>
<span class="sd">      be : pitch angle (degrees)</span>
<span class="sd">      p  : pitch  </span>
<span class="sd">      nx : number of wires in one spiral set</span>
<span class="sd">      ny : number of modules in axial direction</span>
<span class="sd">      ds : extra distance between the wires (default is 0.0 for</span>
<span class="sd">           touching wires)</span>
<span class="sd">      dz : maximal distance of wire center to average cilinder</span>
<span class="sd">      nb : number of elements in a strut (a part of a wire between two</span>
<span class="sd">           crossings), default 4</span>
<span class="sd">    The stent is created around the z-axis. </span>
<span class="sd">    By default, there will be connectors between the wires at each</span>
<span class="sd">    crossing. They can be switched off in the constructor.</span>
<span class="sd">    The returned formex has one set of wires with property 1, the</span>
<span class="sd">    other with property 3. The connectors have property 2. The wire</span>
<span class="sd">    set with property 1 is winding positively around the z-axis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">De</span><span class="p">,</span><span class="n">L</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">nx</span><span class="p">,</span><span class="n">be</span><span class="p">,</span><span class="n">ds</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">nb</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">connectors</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the Wire Stent.&quot;&quot;&quot;</span>
        <span class="n">D</span> <span class="o">=</span> <span class="n">De</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">d</span> <span class="o">-</span> <span class="n">ds</span>
        <span class="n">r</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">D</span>
        <span class="n">dz</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">ds</span><span class="o">+</span><span class="n">d</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">D</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">be</span><span class="p">)</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">nx</span><span class="p">)</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">nx</span><span class="o">*</span><span class="n">L</span><span class="o">/</span><span class="n">p</span><span class="p">))</span>  <span class="c"># The actual length may differ a bit from L</span>
        <span class="c"># a single bumped strut, oriented along the x-axis</span>
        <span class="n">bump_z</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">1.</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="n">nb</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="n">pattern</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">bump1</span><span class="p">(</span><span class="mi">2</span><span class="p">,[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="n">dz</span><span class="p">],</span><span class="n">bump_z</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="c"># scale back to size 1.</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">scale</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="n">nb</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="n">nb</span><span class="p">,</span><span class="mf">1.</span><span class="p">])</span>
        <span class="c"># NE and SE directed struts</span>
        <span class="n">NE</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">shear</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
        <span class="n">SE</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">shear</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.</span><span class="p">)</span>
        <span class="n">NE</span><span class="o">.</span><span class="n">setProp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">SE</span><span class="o">.</span><span class="n">setProp</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="c"># a unit cell of crossing struts</span>
        <span class="n">cell1</span> <span class="o">=</span> <span class="p">(</span><span class="n">NE</span><span class="o">+</span><span class="n">SE</span><span class="p">)</span><span class="o">.</span><span class="n">rosette</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
        <span class="c"># add a connector between first points of NE and SE</span>
        <span class="k">if</span> <span class="n">connectors</span><span class="p">:</span>
            <span class="n">cell1</span> <span class="o">+=</span> <span class="n">Formex</span><span class="p">([[</span><span class="n">NE</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">SE</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]],</span><span class="mi">2</span><span class="p">)</span>
        <span class="c"># and create its mirror</span>
        <span class="n">cell2</span> <span class="o">=</span> <span class="n">cell1</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="c"># and move both to appropriate place</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cell1</span> <span class="o">=</span> <span class="n">cell1</span><span class="o">.</span><span class="n">translate</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cell2</span> <span class="o">=</span> <span class="n">cell2</span><span class="o">.</span><span class="n">translate</span><span class="p">([</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
        <span class="c"># the base pattern cell1+cell2 now has size [-2,-2]..[2,2]</span>
        <span class="c"># Create the full pattern by replication</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="mf">4.</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="mf">4.</span>
        <span class="n">F</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cell1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">cell2</span><span class="p">)</span><span class="o">.</span><span class="n">replic2</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span><span class="n">ny</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span>
        <span class="c"># fold it into a cylinder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">translate</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="n">r</span><span class="p">])</span><span class="o">.</span><span class="n">cylindrical</span><span class="p">(</span>
            <span class="nb">dir</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">360.</span><span class="o">/</span><span class="p">(</span><span class="n">nx</span><span class="o">*</span><span class="n">dx</span><span class="p">),</span><span class="n">p</span><span class="o">/</span><span class="n">nx</span><span class="o">/</span><span class="n">dy</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span>

    <span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the Formex with all bar elements.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;draw&quot;</span><span class="p">:</span>

    <span class="c"># show an example</span>

    <span class="n">wireframe</span><span class="p">()</span>
    <span class="n">reset</span><span class="p">()</span>

    <span class="n">D</span> <span class="o">=</span> <span class="mf">10.</span>
    <span class="n">L</span> <span class="o">=</span> <span class="mf">80.</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mf">0.2</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mf">30.</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">askItems</span><span class="p">([[</span><span class="s">&#39;Diameter&#39;</span><span class="p">,</span><span class="n">D</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">&#39;Length&#39;</span><span class="p">,</span><span class="n">L</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">&#39;WireDiam&#39;</span><span class="p">,</span><span class="n">d</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">&#39;NWires&#39;</span><span class="p">,</span><span class="n">n</span><span class="p">],</span>
                    <span class="p">[</span><span class="s">&#39;Pitch&#39;</span><span class="p">,</span><span class="n">b</span><span class="p">]])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
        <span class="nb">exit</span><span class="p">()</span>
        
    <span class="n">D</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Diameter&#39;</span><span class="p">])</span>
    <span class="n">L</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Length&#39;</span><span class="p">])</span>
    <span class="n">d</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;WireDiam&#39;</span><span class="p">])</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;NWires&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">warning</span><span class="p">(</span><span class="s">&#39;Number of wires must be even!&#39;</span><span class="p">)</span>
        <span class="nb">exit</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Pitch&#39;</span><span class="p">])</span>

    <span class="n">H</span> <span class="o">=</span> <span class="n">DoubleHelixStent</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">L</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">clear</span><span class="p">()</span>
    <span class="n">draw</span><span class="p">(</span><span class="n">H</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s">&#39;iso&#39;</span><span class="p">)</span>
    
    <span class="c"># and save it in a lot of graphics formats</span>
    <span class="k">if</span> <span class="n">ack</span><span class="p">(</span><span class="s">&quot;Do you want to save this image (in lots of formats) ?&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span> <span class="s">&#39;bmp&#39;</span><span class="p">,</span> <span class="s">&#39;jpg&#39;</span><span class="p">,</span> <span class="s">&#39;pbm&#39;</span><span class="p">,</span> <span class="s">&#39;png&#39;</span><span class="p">,</span> <span class="s">&#39;ppm&#39;</span><span class="p">,</span> <span class="s">&#39;xbm&#39;</span><span class="p">,</span> <span class="s">&#39;xpm&#39;</span><span class="p">,</span>
                     <span class="s">&#39;eps&#39;</span><span class="p">,</span> <span class="s">&#39;ps&#39;</span><span class="p">,</span> <span class="s">&#39;pdf&#39;</span><span class="p">,</span> <span class="s">&#39;tex&#39;</span> <span class="p">]:</span> 
            <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;WireStent.&#39;</span><span class="o">+</span><span class="n">ext</span><span class="p">)</span>

<span class="c"># End</span>
</pre></div>
</td></tr></table></div>
<p>As all pyFormex scripts, it starts with a comments line holding the word
<tt class="docutils literal"><span class="pre">pyformex</span></tt> (line 1). This is followed more comments lines specifying the
copyright and license notices. If you intend to distribute your scripts, you should give these certainly special consideration.</p>
<p>Next is a documentation string explaining
the purpose of the script (lines 25-30).
The script then starts by importing all definitions from
other modules required to run the <tt class="file docutils literal"><span class="pre">WireStent.py</span></tt>
script (line 32).</p>
<p>Subsequently, the class <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> is defined which
allows the simple use of the geometrical model in other scripts for e.g.
parametric, optimization and finite element analyses of braided wire stents.
Consequently, the latter scripts do not have to contain the wire stent geometry
building and can be condensed and conveniently arranged. The definition of the
class starts with a documentation string, explaining
its aim and functioning (lines 34-60).</p>
<p>The constructor <tt class="docutils literal"><span class="pre">__init__</span></tt> of the <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> class requires 8
arguments (line 61):</p>
<ul class="simple">
<li>stent external diameter <img class="math" src="_images/math/80c2d7b999148a9a1b9740bd873c5365df7f461a.png" alt="De"/> (mm).</li>
<li>stent length <img class="math" src="_images/math/859ccf4cd60c7bc6b8fa1afc9a42dc811a826d6f.png" alt="L"/> (mm).</li>
<li>wire diameter <img class="math" src="_images/math/96ab646de7704969b91c76a214126b45f2b07b25.png" alt="d"/> (mm).</li>
<li>Number of wires in one spiral set, i.e. wires with the same orientation,
<img class="math" src="_images/math/435f3a43ae59ed41768ef39b59d4515a9f150105.png" alt="nx"/> (-).</li>
<li>Pitch angle <img class="math" src="_images/math/fdb63b9e51abe6bbb16acfb5d7b773ddbb5bf4a8.png" alt="\beta"/> (<img class="math" src="_images/math/09ddb817441a1323731ea0677596957f28faea46.png" alt="\deg"/>).</li>
<li>Extra radial distance between the crossing wires <img class="math" src="_images/math/804a8d1c4e19e5a78fd601c01cc26e9f07e44f66.png" alt="ds"/> (mm). By default,
<img class="math" src="_images/math/804a8d1c4e19e5a78fd601c01cc26e9f07e44f66.png" alt="ds"/> is [0.0]mm for crossing wires, corresponding with a centre line
distance between two crossing wires of exactly <img class="math" src="_images/math/96ab646de7704969b91c76a214126b45f2b07b25.png" alt="d"/>.</li>
<li>Number of elements in a strut, i.e. part of a wire between two crossings,
<img class="math" src="_images/math/7597d11a42c06a95deb9a54a84b717f1571d7c2c.png" alt="nb"/> (-). As every base element is a straight line, multiple elements are
required to approximate the curvature of the stent wires. The default value of 4
elements in a strut is a good assumption.</li>
<li>If <tt class="docutils literal"><span class="pre">connectors=True</span></tt>, extra elements are created at the positions where
there is physical contact between the crossing wires. These elements are
required to enable contact between these wires in finite element analyses.</li>
</ul>
<p>The virtual construction of the wire stent structure is defined by the following
sequence of four operations: (i) Creation of a nearly planar base module of two
crossing wires; (ii) Extending the base module with a mirrored and translated
copy; (iii) Replicating the extended base module in both directions of the base
plane; and (iv) Rolling the nearly planar grid into the cylindrical stent
structure, which is easily parametric adaptable.</p>
<div class="section" id="creating-the-base-module">
<h3>Creating the base module<a class="headerlink" href="#creating-the-base-module" title="Permalink to this headline">¶</a></h3>
<p>(lines 63-71)</p>
<p>Depending on the specified arguments in the constructor, the mean stent diameter
<img class="math" src="_images/math/9ffb448918db29f2a72f8f87f421b3b3cad18f95.png" alt="D"/>, the average stent radius <img class="math" src="_images/math/b55ca7a0aa88ab7d58f4fc035317fdac39b17861.png" alt="r"/>, the <tt class="docutils literal"><span class="pre">bump</span></tt> or curvature of the
wires <img class="math" src="_images/math/b4f7f56319a1ec5982ca6ee623972e083fcd0fba.png" alt="dz"/>, the pitch <img class="math" src="_images/math/36f73fc1312ee0349b3f3a0f3bd9eb5504339011.png" alt="p"/> and the number of base modules in the
axial direction <img class="math" src="_images/math/46587de496607a13f873f771a0964285cbe8f638.png" alt="ny"/> are calculated with the following script. As the wire
stent structure is obtained by braiding, the wires have an undulating course and
the <tt class="docutils literal"><span class="pre">bump</span> <span class="pre">dz</span></tt> corresponds to the amplitude of the wave. If no extra distance
<img class="math" src="_images/math/804a8d1c4e19e5a78fd601c01cc26e9f07e44f66.png" alt="ds"/> is specified, there will be exactly one wire diameter between the
centre lines of the crossing wires. The number of modules in the axial direction
<img class="math" src="_images/math/46587de496607a13f873f771a0964285cbe8f638.png" alt="ny"/> is an integer, therefore, the actual length of the stent model might
differ slightly from the specified, desired length <img class="math" src="_images/math/859ccf4cd60c7bc6b8fa1afc9a42dc811a826d6f.png" alt="L"/>. However, this
difference has a negligible impact on the numerical results.</p>
<p>Of now, all parameters to describe the stent geometry are specified and
available to start the construction of the wire stent. Initially a simple Formex
is created using the <tt class="docutils literal"><span class="pre">pattern()</span></tt>-function: a straigth line segment of length
1 oriented along the X-axis (East or <img class="math" src="_images/math/dce34f4dfb2406144304ad0d6106c5382ddd1446.png" alt="1"/>-direction). The <tt class="docutils literal"><span class="pre">replic()</span></tt>-functionality replicates this line segment <img class="math" src="_images/math/7597d11a42c06a95deb9a54a84b717f1571d7c2c.png" alt="nb"/> times with step 1 in the
X-direction (<img class="math" src="_images/math/bc1f9d9bf8a1b606a4188b5ce9a2af1809e27a89.png" alt="0"/>-direction). Subsequently, these <img class="math" src="_images/math/7597d11a42c06a95deb9a54a84b717f1571d7c2c.png" alt="nb"/> line
segments form a new Formex which is given a one-dimensional <tt class="docutils literal"><span class="pre">bump</span></tt> with the
<tt class="docutils literal"><span class="pre">bump1()</span></tt>-function. The Formex undergoes a deformation in the Z-direction
(<img class="math" src="_images/math/41c544263a265ff15498ee45f7392c5f86c6d151.png" alt="2"/>-direction), forced by the point <tt class="docutils literal"><span class="pre">[0,0,dz]</span></tt>. The <tt class="docutils literal"><span class="pre">bump</span></tt>
intensity is specified by the quadratic <tt class="docutils literal"><span class="pre">bump_z</span></tt> function and varies along the
X-axis (<img class="math" src="_images/math/bc1f9d9bf8a1b606a4188b5ce9a2af1809e27a89.png" alt="0"/>-axis). The creation of this single bumped strut, oriented
along the X-axis is summarized in the next script and depicted in figures
<a class="reference internal" href="#fig-straight"><em>A straight line segment</em></a>, <a class="reference internal" href="#fig-replicated"><em>The line segment with replications</em></a> and <a class="reference internal" href="#fig-bumped"><em>A bumped line segment</em></a>,.</p>
<div class="figure align-center" id="fig-straight">
<img alt="straight line segment" src="_images/WireStentDemot2Step01.png" style="width: 300px;" />
<p class="caption">A straight line segment</p>
</div>
<div class="figure align-center" id="fig-replicated">
<img alt="line segment with replications" src="_images/WireStentDemot2Step02.png" style="width: 300px;" />
<p class="caption">The line segment with replications</p>
</div>
<div class="figure align-center" id="fig-bumped">
<img alt="bumped line segment" src="_images/WireStentDemot2Step03.png" style="width: 300px;" />
<p class="caption">A bumped line segment</p>
</div>
<p>The single bumped strut (<tt class="docutils literal"><span class="pre">base</span></tt>) is rescaled homothetically in the XY-plane to
size one with the <tt class="docutils literal"><span class="pre">scale()</span></tt>-function. Subsequently, the <tt class="docutils literal"><span class="pre">shear()</span></tt>-functionality generates a new <tt class="docutils literal"><span class="pre">NE</span></tt> Formex by skewing the <tt class="docutils literal"><span class="pre">base</span></tt> Formex in
the Y-direction (<img class="math" src="_images/math/dce34f4dfb2406144304ad0d6106c5382ddd1446.png" alt="1"/>-direction) with a <tt class="docutils literal"><span class="pre">skew</span></tt> factor of <img class="math" src="_images/math/dce34f4dfb2406144304ad0d6106c5382ddd1446.png" alt="1"/> in
the YX-plane. As a result, the Y-coordinates of the <tt class="docutils literal"><span class="pre">base</span></tt> Formex are altered
according to the following rule: <img class="math" src="_images/math/1976493054d4291e9f39a772ddeac0b5e7779389.png" alt="y_2 = y_1 + skew \* x_1"/>. Similarly a
<tt class="docutils literal"><span class="pre">SE</span></tt> Formex is generated by a <tt class="docutils literal"><span class="pre">shear()</span></tt> operation on a mirrored copy of the
<tt class="docutils literal"><span class="pre">base</span></tt> Formex. The <tt class="docutils literal"><span class="pre">base</span></tt> copy, mirrored in the direction of the XY-plane
(perpendicular to the <img class="math" src="_images/math/41c544263a265ff15498ee45f7392c5f86c6d151.png" alt="2"/>-axis), is obtained by the <tt class="docutils literal"><span class="pre">reflect()</span></tt>
command. Both Formices are given a different property number by the
<tt class="docutils literal"><span class="pre">setProp()</span></tt>-function, visualised by the different color codes in Figure
<a class="reference internal" href="#fig-unit-cell"><em>Unit cell of crossing wires and connectors</em></a> This number can be used as an entry in a database, which holds some
sort of property. The Formex and the database are two seperate entities, only
linked by the property numbers. The <tt class="docutils literal"><span class="pre">rosette()</span></tt>-function creates a unit cell
of crossing struts by <img class="math" src="_images/math/41c544263a265ff15498ee45f7392c5f86c6d151.png" alt="2"/> rotational replications with an angular step of
[180]:math:<cite>deg</cite> around the Z-axis (the original Formex is the first of the
<img class="math" src="_images/math/41c544263a265ff15498ee45f7392c5f86c6d151.png" alt="2"/> replicas). If specified in the constructor, an additional Formex with
property <img class="math" src="_images/math/41c544263a265ff15498ee45f7392c5f86c6d151.png" alt="2"/> connects the first points of the <tt class="docutils literal"><span class="pre">NE</span></tt> and <tt class="docutils literal"><span class="pre">SE</span></tt> Formices.</p>
<p>(lines 72-83)</p>
<div class="figure align-center" id="fig-rescaled">
<img alt="rescaled bumped line segment" src="_images/WireStentDemot2Step04.png" style="width: 300px;" />
<p class="caption">Rescaled bumped strut</p>
</div>
<div class="figure align-center" id="fig-mirrored">
<img alt="mirrored and skewed bumped strut" src="_images/WireStentDemot2Step07.png" style="width: 300px;" />
<p class="caption">Mirrored and skewed bumped strut</p>
</div>
<div class="figure align-center" id="fig-unit-cell">
<img alt="unit cell of wires and connectors" src="_images/WireStentDemot2Step09.png" style="width: 300px;" />
<p class="caption">Unit cell of crossing wires and connectors</p>
</div>
</div>
<div class="section" id="extending-the-base-module">
<h3>Extending the base module<a class="headerlink" href="#extending-the-base-module" title="Permalink to this headline">¶</a></h3>
<p>Subsequently, a mirrored copy of the base cell is generated (Figure
<a class="reference internal" href="#fig-mirrored-unit-cell"><em>Mirrored unit cell</em></a>). Both Formices are
translated to their appropriate side by side position with the <tt class="docutils literal"><span class="pre">translate()</span></tt>-option and form the complete extended base module with 4 by 4 dimensions as
depicted in Figure <a class="reference internal" href="#fig-base-module"><em>Completed base module</em></a>.
Furthermore, both Formices are defined as an
attribute of the <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> class by the <tt class="docutils literal"><span class="pre">self</span></tt>-statement,
allowing their use after every <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> initialisation. Such further
use is impossible with local variables, such as for example the <tt class="docutils literal"><span class="pre">NE</span></tt> and
<tt class="docutils literal"><span class="pre">SE</span></tt> Formices.</p>
<p>(lines 84-89)</p>
<div class="figure align-center" id="fig-mirrored-unit-cell">
<img alt="mirrored unit cell" src="_images/WireStentDemot2Step10.png" style="width: 300px;" />
<p class="caption">Mirrored unit cell</p>
</div>
<div class="figure align-center" id="fig-base-module">
<img alt="completed base module" src="_images/WireStentDemot2Step11.png" style="width: 300px;" />
<p class="caption">Completed base module</p>
</div>
</div>
<div class="section" id="full-nearly-planar-pattern">
<h3>Full nearly planar pattern<a class="headerlink" href="#full-nearly-planar-pattern" title="Permalink to this headline">¶</a></h3>
<p>The fully nearly planar pattern is obtained by copying the base module in two
directions and shown in Figure <a class="reference internal" href="#fig-full-plane"><em>Full planar topology</em></a>. <tt class="docutils literal"><span class="pre">replic2()</span></tt> generates this
pattern with <img class="math" src="_images/math/435f3a43ae59ed41768ef39b59d4515a9f150105.png" alt="nx"/> and <img class="math" src="_images/math/46587de496607a13f873f771a0964285cbe8f638.png" alt="ny"/> replications with steps <img class="math" src="_images/math/953640113c8002037caa26af92570f9cb7d5773c.png" alt="dx"/> and
<img class="math" src="_images/math/5a687ff25b068f70b5def1fdb4f1c49344997391.png" alt="dy"/> in respectively, the default X- and Y-direction.</p>
<p>(lines 90-93)</p>
<div class="figure align-center" id="fig-full-plane">
<img alt="Full planar topology" src="_images/WireStentDemot2Step12.png" style="width: 300px;" />
<p class="caption">Full planar topology</p>
</div>
<div class="figure align-center" id="fig-full-plane-orthoview">
<img alt="orthogonal view of the full planar topology" src="_images/WireStentDemot2Step13.png" style="width: 300px;" />
<p class="caption">Orthogonal view of the full planar topology</p>
</div>
</div>
<div class="section" id="cylindrical-stent-structure">
<h3>Cylindrical stent structure<a class="headerlink" href="#cylindrical-stent-structure" title="Permalink to this headline">¶</a></h3>
<p>Finally the full pattern is translated over the stent radius <img class="math" src="_images/math/b55ca7a0aa88ab7d58f4fc035317fdac39b17861.png" alt="r"/> in
Z-direction and transformed to the cylindrical stent structure by a coordinate
transformation with the Z-coordinates as distance <img class="math" src="_images/math/b55ca7a0aa88ab7d58f4fc035317fdac39b17861.png" alt="r"/>, the X-coordinates
as angle <img class="math" src="_images/math/52e8ed7a3ba22130ad3984eb2cd413406475a689.png" alt="\theta"/> and the Y-coordinates as height <img class="math" src="_images/math/b13f21416d84e13708696f34dea81026cda583c9.png" alt="z"/>. The
<tt class="docutils literal"><span class="pre">scale()</span></tt>-operator rescales the stent structure to the correct circumference
and length. The resulting stent geometry is depicted in Figure <a class="reference internal" href="#fig-stent"><em>Cylindrical stent</em></a>.
(lines 94-96)</p>
<p>In addition to the stent initialization, the <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> class script
contains a function <tt class="docutils literal"><span class="pre">all()</span></tt> representing the complete stent Formex.
Consequently, the <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> class has four attributes: the Formices
<tt class="docutils literal"><span class="pre">cell1</span></tt>, <tt class="docutils literal"><span class="pre">cell2</span></tt> and <tt class="docutils literal"><span class="pre">all</span></tt>; and the number <img class="math" src="_images/math/46587de496607a13f873f771a0964285cbe8f638.png" alt="ny"/>.
(lines 97-100)</p>
<div class="figure align-center" id="fig-stent">
<img alt="cylindrical stent" src="_images/WireStentDemot2Step16.png" style="width: 300px;" />
<p class="caption">Cylindrical stent</p>
</div>
<div class="figure align-center" id="fig-stent-ortho">
<img alt="orthogonal view of thecylindrical stent" src="_images/WireStentDemot2Step15.png" style="width: 300px;" />
<p class="caption">Orthogonal view of the cylindrical stent</p>
</div>
</div>
<div class="section" id="parametric-stent-geometry">
<h3>Parametric stent geometry<a class="headerlink" href="#parametric-stent-geometry" title="Permalink to this headline">¶</a></h3>
<p>An inherent feature of script-based modeling is the possibility of easily
generating lots of variations on the original geometry. This is a huge advantage
for parametric analyses and illustrated in figures
<a class="reference internal" href="#fig-stent-d16l40d22n6b25"><em>Stent variant with </em></a>: these wire
stents are all created with the same script, but with other values of the
parameters <img class="math" src="_images/math/80c2d7b999148a9a1b9740bd873c5365df7f461a.png" alt="De"/>, <img class="math" src="_images/math/435f3a43ae59ed41768ef39b59d4515a9f150105.png" alt="nx"/> and <img class="math" src="_images/math/fdb63b9e51abe6bbb16acfb5d7b773ddbb5bf4a8.png" alt="\beta"/>. As the script for building
the wire stent geometry is defined as a the <tt class="docutils literal"><span class="pre">DoubleHelixStent</span></tt> class in the
(<tt class="file docutils literal"><span class="pre">WireStent.py</span></tt>) script, it can easily be imported for e.g. this purpose.</p>
<div class="figure align-center" id="fig-stent-d16l40d22n6b25">
<img alt="Stent variant" src="_images/WireStentD16L40d22n6b25.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/dd5e3857ae21daa6c9c4521d45e2e09454c847f0.png" alt="De=16, nx=6, \beta=25"/></p>
</div>
<div class="figure align-center" id="fig-stent-d16l40d22n6b50">
<img alt="Stent variant" src="_images/WireStentD16L40d22n6b50.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/a3dfc30029c4ca579f65947e1858a05ae1233659.png" alt="De=16, nx=6, \beta=50"/></p>
</div>
<div class="figure align-center" id="fig-stent-d16l40d22n10b25">
<img alt="Stent variant" src="_images/WireStentD16L40d22n10b25.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/9f3bdd8f54a9a2d46c769410f286bff8646a4d7a.png" alt="De=16, nx=10, \beta=25"/></p>
</div>
<div class="figure align-center" id="fig-stent-d16l40d22n10b50">
<img alt="Stent variant" src="_images/WireStentD16L40d22n10b50.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/55aaa8741e5126c197bd3a986f46165e15d7bf19.png" alt="De=16, nx=10, \beta=50"/></p>
</div>
<div class="figure align-center" id="fig-stent-d32l40d22n6b25">
<img alt="Stent variant" src="_images/WireStentD32L40d22n6b25.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/6ab77f0909f9e9426fbe827c5e805a87aa1e6fa4.png" alt="De=32, nx=6, \beta=25"/></p>
</div>
<div class="figure align-center" id="fig-stent-d32l40d22n6b50">
<img alt="Stent variant" src="_images/WireStentD32L40d22n6b50.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/2aeee926bd2d6bbe822ad1871a424e07bad899a5.png" alt="De=32, nx=6, \beta=50"/></p>
</div>
<div class="figure align-center" id="fig-stent-d32l40d22n10b25">
<img alt="Stent variant" src="_images/WireStentD32L40d22n10b25.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/a6b32b71d40ef0cc4f92e0493a2f3db800b8d2a1.png" alt="De=32, nx=10, \beta=25"/></p>
</div>
<div class="figure align-center" id="fig-stent-d32l40d22n10b50">
<img alt="Stent variant" src="_images/WireStentD32L40d22n10b50.png" style="width: 300px;" />
<p class="caption">Stent variant with <img class="math" src="_images/math/03093f6aafd62c55673071ae075bcc438f87e571.png" alt="De=32, nx=10, \beta=50"/></p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># $Id: WireStentParametricExample.py 2146 2012-01-09 08:57:52Z bverheg $   *** pyformex ***</span>
<span class="c">##</span>
<span class="c">##  This file is part of pyFormex 0.8.6  (Mon Jan 16 21:15:46 CET 2012)</span>
<span class="c">##  pyFormex is a tool for generating, manipulating and transforming 3D</span>
<span class="c">##  geometrical models by sequences of mathematical operations.</span>
<span class="c">##  Home page: http://pyformex.org</span>
<span class="c">##  Project page:  http://savannah.nongnu.org/projects/pyformex/</span>
<span class="c">##  Copyright 2004-2011 (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) </span>
<span class="c">##  Distributed under the GNU General Public License version 3 or later.</span>
<span class="c">##</span>
<span class="c">##</span>
<span class="c">##  This program is free software: you can redistribute it and/or modify</span>
<span class="c">##  it under the terms of the GNU General Public License as published by</span>
<span class="c">##  the Free Software Foundation, either version 3 of the License, or</span>
<span class="c">##  (at your option) any later version.</span>
<span class="c">##</span>
<span class="c">##  This program is distributed in the hope that it will be useful,</span>
<span class="c">##  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">##  GNU General Public License for more details.</span>
<span class="c">##</span>
<span class="c">##  You should have received a copy of the GNU General Public License</span>
<span class="c">##  along with this program.  If not, see http://www.gnu.org/licenses/.</span>
<span class="c">##</span>


<span class="kn">from</span> <span class="nn">examples.WireStent</span> <span class="kn">import</span> <span class="n">DoubleHelixStent</span>

<span class="k">for</span> <span class="n">De</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">16.</span><span class="p">,</span><span class="mf">32.</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">nx</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">beta</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span><span class="mi">50</span><span class="p">]:</span>
            <span class="n">stent</span> <span class="o">=</span> <span class="n">DoubleHelixStent</span><span class="p">(</span><span class="n">De</span><span class="p">,</span><span class="mf">40.</span><span class="p">,</span><span class="mf">0.22</span><span class="p">,</span><span class="n">nx</span><span class="p">,</span><span class="n">beta</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">draw</span><span class="p">(</span><span class="n">stent</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s">&#39;iso&#39;</span><span class="p">)</span>
            <span class="n">pause</span><span class="p">()</span>
            <span class="n">clear</span><span class="p">()</span>
            
</pre></div>
</div>
<p>Obviously, generating such parametric wire stent geometries with classical CAD
methodologies is feasible, though probably (very) time consuming. However, as
provides a multitude of features (such as parametric modeling, finite element
pre- and postprocessing, optimization strategies, etcetera) in one single
consistent environment, it appears to be the obvious way to go when studying
the mechanical behavior of braided wire stents.</p>
</div>
</div>
<div class="section" id="operating-on-surface-meshes">
<span id="sec-operating-surf-mesh"></span><h2>Operating on surface meshes<a class="headerlink" href="#operating-on-surface-meshes" title="Permalink to this headline">¶</a></h2>
<p>Besides being used for creating geometries, also offers interesting
possibilities for executing specialized operations on surface meshes, usually
STL type triangulated meshes originating from medical scan (CT) images. Some of
the algorithms developed were included in .</p>
<div class="section" id="unroll-stent">
<span id="sec-unroll-stent"></span><h3>Unroll stent<a class="headerlink" href="#unroll-stent" title="Permalink to this headline">¶</a></h3>
<p>A stent is a medical device used to reopen narrowed arteries. The vast majority
of stents are balloon-expandable, which means that the metal structure is
deployed by inflating a balloon, located inside the stent. Figure
<a class="reference internal" href="#fig-cypher-stent"><em>Triangulated mesh of a Cypher® stent</em></a> shows an example of such a stent prior to expansion
(balloon not shown). The 3D surface is obtained by micro CT and consists of
triangles.</p>
<div class="figure align-center" id="fig-cypher-stent">
<img alt="Cypher stent" src="_images/cypher-stent.png" />
<p class="caption">Triangulated mesh of a Cypher® stent</p>
</div>
<p>The structure of such a device can be quite complex and difficult to analyse.
The same functions offers for creating geometries can also be employed to
investigate triangulated meshes. A simple unroll operation of the stent gives a
much better overview of the complete geometrical structure and allows easier
analysis (see figure <a class="reference internal" href="#fig-cypher-stent-unroll"><em>Result of the unroll operation</em></a>).</p>
<p><tt class="docutils literal"><span class="pre">F</span> <span class="pre">=</span> <span class="pre">F.toCylindrical().scale([1.,2*radius*pi/360,1.])</span></tt></p>
<div class="figure align-center" id="fig-cypher-stent-unroll">
<img alt="Cypher stent unrolled" src="_images/cypher-stent-unroll.png" />
<p class="caption">Result of the unroll operation</p>
</div>
<p>The unrolled geometry can then be used for further investigations. An important
property of such a stent is the circumference of a single stent cell. The
<tt class="docutils literal"><span class="pre">clip()</span></tt> method can be used to isolate a single stent cell. In order to obtain
a line describing the stent cell, the function <tt class="docutils literal"><span class="pre">intersectionLinesWithPlane()</span></tt>
has been used. The result can be seen in figures <a class="reference internal" href="#fig-cypher-stent-cell-full"><em>Part of the intersection with a plane</em></a>.</p>
<div class="figure align-center" id="fig-cypher-stent-cell-full">
<img alt="Intersection with plane" src="_images/stent-cell-full.png" />
<p class="caption">Part of the intersection with a plane</p>
</div>
<p>Finally, one connected circumference of a stent cell is selected
(figure <a class="reference internal" href="#fig-cypher-stent-cell"><em>Circumference of a stent cell</em></a>)
and the <tt class="docutils literal"><span class="pre">length()</span></tt> function returns its length, which
is 9.19 mm.</p>
<div class="figure align-center" id="fig-cypher-stent-cell">
<img alt="circumference of stent cell" src="_images/stent-cell.png" />
<p class="caption">Circumference of a stent cell</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="refman.html" title="pyFormex reference manual"
             >next</a> |</li>
        <li class="right" >
          <a href="config.html" title="Configuring pyFormex"
             >previous</a> |</li>
        <li><a href="index.html">pyFormex v0.8.6 documentation</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2011, Benedict Verhegghe.
    </span>
      Last updated on Jan 16, 2012.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    </span>
    </div>
  </body>
</html>
