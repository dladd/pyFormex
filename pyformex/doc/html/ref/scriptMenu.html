

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>27. scriptMenu — Menu with pyFormex scripts. &mdash; pyFormex v0.8.4-a1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8.4-a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="pyFormex v0.8.4-a1 documentation" href="../index.html" />
    <link rel="up" title="pyFormex reference manual" href="../refman.html" />
    <link rel="next" title="28. toolbar — Toolbars for the pyFormex GUI." href="toolbar.html" />
    <link rel="prev" title="26. imageViewer — A general image viewer" href="imageViewer.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="toolbar.html" title="28. toolbar — Toolbars for the pyFormex GUI."
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="imageViewer.html" title="26. imageViewer — A general image viewer"
             accesskey="P">previous</a> |</li>
    <li><a href="http://pyformex.org/">pyFormex Home</a> &gt;</li>
    
        <li><a href="../index.html">pyFormex Documentation</a> &gt;</li>

          <li><a href="../refman.html" accesskey="U">pyFormex reference manual</a> &gt;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p>DEBUG: Using the (slower) Python misc functions
DEBUG: Using the (slower) Python misc functions
DEBUG: LOADING IMAGE FORMATS
DEBUG:
Qt image types for saving: [&#8216;bmp&#8217;, &#8216;ico&#8217;, &#8216;jpeg&#8217;, &#8216;jpg&#8217;, &#8216;png&#8217;, &#8216;ppm&#8217;, &#8216;tif&#8217;, &#8216;tiff&#8217;, &#8216;xbm&#8217;, &#8216;xpm&#8217;]
Qt image types for input: [&#8216;bmp&#8217;, &#8216;gif&#8217;, &#8216;ico&#8217;, &#8216;jpeg&#8217;, &#8216;jpg&#8217;, &#8216;mng&#8217;, &#8216;pbm&#8217;, &#8216;pgm&#8217;, &#8216;png&#8217;, &#8216;ppm&#8217;, &#8216;svg&#8217;, &#8216;tif&#8217;, &#8216;tiff&#8217;, &#8216;xbm&#8217;, &#8216;xpm&#8217;]
gl2ps image types: []
image types converted from EPS: []
DEBUG: LOADING IMAGE FORMATS
DEBUG:
Qt image types for saving: [&#8216;bmp&#8217;, &#8216;ico&#8217;, &#8216;jpeg&#8217;, &#8216;jpg&#8217;, &#8216;png&#8217;, &#8216;ppm&#8217;, &#8216;tif&#8217;, &#8216;tiff&#8217;, &#8216;xbm&#8217;, &#8216;xpm&#8217;]
Qt image types for input: [&#8216;bmp&#8217;, &#8216;gif&#8217;, &#8216;ico&#8217;, &#8216;jpeg&#8217;, &#8216;jpg&#8217;, &#8216;mng&#8217;, &#8216;pbm&#8217;, &#8216;pgm&#8217;, &#8216;png&#8217;, &#8216;ppm&#8217;, &#8216;svg&#8217;, &#8216;tif&#8217;, &#8216;tiff&#8217;, &#8216;xbm&#8217;, &#8216;xpm&#8217;]
gl2ps image types: []
image types converted from EPS: []
.. $Id$  -<em>- rst -</em>-
.. pyformex reference manual &#8212; scriptMenu
.. CREATED WITH py2rst.py: DO NOT EDIT</p>
<div class="section" id="module-scriptMenu">
<span id="scriptmenu-menu-with-pyformex-scripts"></span><span id="sec-ref-scriptmenu"></span><h1>27. <a class="reference internal" href="#module-scriptMenu" title="scriptMenu: Menu with pyFormex scripts."><tt class="xref py py-mod docutils literal"><span class="pre">scriptMenu</span></tt></a> &#8212; Menu with pyFormex scripts.<a class="headerlink" href="#module-scriptMenu" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">Classes</span> <span class="pre">defined</span> <span class="pre">in</span> <span class="pre">module</span> <span class="pre">scriptMenu</span></tt></p>
<dl class="class">
<dt id="scriptMenu.ScriptMenu">
<em class="property">class </em><tt class="descclassname">scriptMenu.</tt><tt class="descname">ScriptMenu</tt><big>(</big><em>title</em>, <em>dir=None</em>, <em>files=None</em>, <em>ext=None</em>, <em>recursive=None</em>, <em>max=0</em>, <em>autoplay=False</em>, <em>toplevel=True</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu" title="Permalink to this definition">¶</a></dt>
<dd><p>A menu of pyFormex scripts in a directory or list.</p>
<p>This class creates a menu of pyFormex scripts collected from a directory
or specified in a list. It is e.g. used in the pyFormex GUI to create
the examples menu, and for the scripts history. The pyFormex scripts
can then be executed from the menu. The user may use this class to add
his own scripts into the pyFormex GUI.</p>
<p>Only files that are recognized by <a class="reference internal" href="utils.html#utils.is_pyFormex" title="utils.is_pyFormex"><tt class="xref py py-func docutils literal"><span class="pre">utils.is_pyFormex()</span></tt></a> as being
pyFormex scripts will be added to the menu.</p>
<p>The constructor takes the following arguments:</p>
<ul class="simple">
<li><cite>title</cite>: the top level label for the menu</li>
<li><cite>files</cite>: a list of file names of pyFormex scripts. If no <cite>dir</cite> nor <cite>ext</cite>
arguments are given, these should be the full path names to the script
files. If omitted, all files in the directory <cite>dir</cite> whose name is ending
with <cite>ext</cite> <em>and do not start with either &#8216;.&#8217; or &#8216;_&#8217;</em>, will be selected.</li>
<li><cite>dir</cite>: an optional directory path. If given, it will be prepended to
each file name in <cite>files</cite> and <cite>recursive</cite> will be True by default.</li>
<li><cite>ext</cite>: an extension to be added to each filename. If <cite>dir</cite> was specified,
the default extension is &#8216;.py&#8217;. If no <cite>dir</cite> was specified, the default
extension is an empty string.</li>
<li><cite>recursive</cite>: if True, a cascading menu of all pyFormex scripts in the
directory and below will be constructed.</li>
<li><cite>max</cite>: if specified, the list of files will be truncated to this number
of items. Adding more files to the menu will then be done at the top and  
the surplus number of files will be dropped from the bottom of the list.</li>
</ul>
<p>The defaults were thus chosen to be convenient for the two most frequent
uses of this class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ScriptMenu</span><span class="p">(</span><span class="s">&#39;My Scripts&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s">&quot;/path/to/my/sciptsdir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>creates a menu will all pyFormex scripts in the specified path and its
subdirectories.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ScriptMenu</span><span class="p">(</span><span class="s">&#39;History&#39;</span><span class="p">,</span><span class="n">files</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;/my/script1.py&quot;</span><span class="p">,</span><span class="s">&quot;/some/other/script.pye&quot;</span><span class="p">],</span><span class="n">recursive</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>is typically used to create a history menu of previously visited files</p>
<p>With the resulting file list, a menu is created. Selecting a menu item
will make the corresponding file the current script and unless the
<cite>autoplay</cite> configuration variable was set to False, the script is executed.</p>
<p>If the file specification was done by a directory path only,
some extra options will be included in the menu.
They are fairly self-explaining and mainly intended for the pyFormex
developers, in order to test the functionality by running a sets of
example scripts:</p>
<ul class="simple">
<li><em class="menuselection">Run next script</em></li>
<li><em class="menuselection">Run all following scripts</em></li>
<li><em class="menuselection">Run all scripts</em></li>
<li><em class="menuselection">Run a random script</em></li>
<li><em class="menuselection">Run all in random order</em></li>
</ul>
<p>Furthermore, if the menu is a toplevel one, it will have the following
extra options:</p>
<ul class="simple">
<li><em class="menuselection">Classify scripts</em></li>
<li><em class="menuselection">Remove catalog</em></li>
<li><em class="menuselection">Reload scripts</em></li>
</ul>
<p>The first option uses the keyword specifications in the scripts docstring
to make a classification of the scripts according to keywords.
See the <a class="reference internal" href="#scriptMenu.scriptKeywords" title="scriptMenu.scriptKeywords"><tt class="xref py py-func docutils literal"><span class="pre">scriptKeywords()</span></tt></a> function for more info. The second option
removes the classification. Both options are especially useful for the
pyFormex examples.</p>
<p>The last option reloads a ScriptMenu. This can be used to update the menu
when you created a new script file.</p>
<dl class="method">
<dt id="scriptMenu.ScriptMenu.fileName">
<tt class="descname">fileName</tt><big>(</big><em>scriptname</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.fileName" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the full pathname for a scriptname.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.getFiles">
<tt class="descname">getFiles</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.getFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of scripts in self.dir</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.filterFiles">
<tt class="descname">filterFiles</tt><big>(</big><em>files</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.filterFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a list of scripts</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.loadFiles">
<tt class="descname">loadFiles</tt><big>(</big><em>files=None</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.loadFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the script files in this menu</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.run">
<tt class="descname">run</tt><big>(</big><em>action</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the selected script.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runScript">
<tt class="descname">runScript</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the specified script.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runNext">
<tt class="descname">runNext</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runNext" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the next script.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runAllNext">
<tt class="descname">runAllNext</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runAllNext" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the current and all following scripts.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runAll">
<tt class="descname">runAll</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all scripts.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runAllFiles">
<tt class="descname">runAllFiles</tt><big>(</big><em>files</em>, <em>randomize=False</em>, <em>pause=0.0</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runAllFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all the scripts in given list.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runRandom">
<tt class="descname">runRandom</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runRandom" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a random script.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.runAllRandom">
<tt class="descname">runAllRandom</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.runAllRandom" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all scripts in a random order.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.reload">
<tt class="descname">reload</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload the scripts from dir.</p>
<p>This is only available if a directory path was specified and
no files.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.add">
<tt class="descname">add</tt><big>(</big><em>filename</em>, <em>strict=True</em><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new filename to the front of the menu.</p>
<p>By default, only legal pyFormex scripts can be added.</p>
</dd></dl>

<dl class="method">
<dt id="scriptMenu.ScriptMenu.classify">
<tt class="descname">classify</tt><big>(</big><big>)</big><a class="headerlink" href="#scriptMenu.ScriptMenu.classify" title="Permalink to this definition">¶</a></dt>
<dd><p>Classify the files in submenus according to keywords.</p>
</dd></dl>

</dd></dl>

<p><tt class="docutils literal"><span class="pre">Functions</span> <span class="pre">defined</span> <span class="pre">in</span> <span class="pre">module</span> <span class="pre">scriptMenu</span></tt></p>
<dl class="function">
<dt id="scriptMenu.extractKeyword">
<tt class="descclassname">scriptMenu.</tt><tt class="descname">extractKeyword</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#scriptMenu.extractKeyword" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a <tt class="docutils literal"><span class="pre">keyword</span> <span class="pre">=</span> <span class="pre">value</span></tt> pair from a string.</p>
<p>If the input string <cite>s</cite> is of the form <tt class="docutils literal"><span class="pre">keyword</span> <span class="pre">=</span> <span class="pre">value</span></tt>
a tuple (keyword,value) is returned, else None.</p>
</dd></dl>

<dl class="function">
<dt id="scriptMenu.scriptKeywords">
<tt class="descclassname">scriptMenu.</tt><tt class="descname">scriptKeywords</tt><big>(</big><em>fn</em>, <em>keyw=None</em><big>)</big><a class="headerlink" href="#scriptMenu.scriptKeywords" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the script keywords from a script file.</p>
<ul class="simple">
<li><cite>fn</cite>: the full path name of a pyFormex script file.</li>
<li><cite>keyw</cite>: an optional list of keywords.</li>
</ul>
<p>Script keywords are written in the form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">key</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<p>in the docstring of the script.
The docstring is the first non-indented multiline string of the file.
A multiline string is a string delimited by triple double-quotes.
Matching lines are placed in a dictionary which becomes the return value.</p>
<p>If a list of keywords is given, the return dictionary will only contain
the matching values.</p>
</dd></dl>

<dl class="function">
<dt id="scriptMenu.sortSets">
<tt class="descclassname">scriptMenu.</tt><tt class="descname">sortSets</tt><big>(</big><em>d</em><big>)</big><a class="headerlink" href="#scriptMenu.sortSets" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the set values in d into sorted lists.</p>
<ul class="simple">
<li><cite>d</cite>: a Python dictionary</li>
</ul>
<p>All the values in the dictionary are checked. Those that are of type
<cite>set</cite> are converted to a sorted list.</p>
</dd></dl>

<dl class="function">
<dt id="scriptMenu.createScriptMenu">
<tt class="descclassname">scriptMenu.</tt><tt class="descname">createScriptMenu</tt><big>(</big><em>parent=None</em>, <em>before=None</em><big>)</big><a class="headerlink" href="#scriptMenu.createScriptMenu" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the menu(s) with pyFormex scripts</p>
<p>This creates a menu with all examples distributed with pyFormex.
By default, this menu is put in the top menu bar with menu label &#8216;Examples&#8217;.</p>
<p>The user can add his own script directories through the configuration
settings. In that case the &#8216;Examples&#8217; menu and menus for all the
configured script paths will be gathered in a top level popup menu labeled
&#8216;Scripts&#8217;.</p>
<p>The menu will be placed in the top menu bar before the specified item.
If a menu item named &#8216;Examples&#8217; or &#8216;Scripts&#8217; already exists, it is
replaced.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="http://pyformex.org/">
        <img class="logo" src="../_static/pyformex_logo_small.png" alt="Logo"/>
        </a></p>
    <h3><a href="../index.html">Documentation</a></h3>
  <h4>Previous topic</h4>
  <p class="topless"><a href="imageViewer.html"
                        title="previous chapter">26. <tt class="docutils literal docutils literal docutils literal"><span class="pre">imageViewer</span></tt> &#8212; A general image viewer</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="toolbar.html"
                        title="next chapter">28. <tt class="docutils literal docutils literal"><span class="pre">toolbar</span></tt> &#8212; Toolbars for the pyFormex GUI.</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="toolbar.html" title="28. toolbar — Toolbars for the pyFormex GUI."
             >next</a> |</li>
        <li class="right" >
          <a href="imageViewer.html" title="26. imageViewer — A general image viewer"
             >previous</a> |</li>
    <li><a href="http://pyformex.org/">pyFormex Home</a> &gt;</li>
    
        <li><a href="../index.html">pyFormex Documentation</a> &gt;</li>

          <li><a href="../refman.html" >pyFormex reference manual</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Benedict Verhegghe.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
  </body>
</html>